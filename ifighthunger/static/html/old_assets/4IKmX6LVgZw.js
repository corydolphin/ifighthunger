/*1353979896,173220389*/

if (self.CavalryLogger) { CavalryLogger.start_js(["gM1Bs"]); }

__d("keyMirror",[],function(a,b,c,d,e,f){var g=function(h){var i={},j;if(!h)return h;for(j in h){if(!h.hasOwnProperty(j))continue;i[j]=j;}return i;};e.exports=g;});
__d("throwIf",[],function(a,b,c,d,e,f){var g=function(h,i){if(h)throw new Error(i);};e.exports=g;});
__d("ReactErrors",["keyMirror","throwIf"],function(a,b,c,d,e,f){var g=b('keyMirror'),h=b('throwIf'),i=g({CLASS_SPEC:null,CONTROL_WITHOUT_BACKING_DOM:null,NO_RENDER_NODE:null,USING_CHILD_TWICE:null,DUAL_TRANSACTION:null,MISSING_TRANSACTION:null,INVALID_STATE:null,ON_DOM_READY_MISMATCH:null,INVALID_COMPONENT:null,RUNAWAY_TREE:null,ESCAPE_TYPE:null});i.throwIf=h;e.exports=i;});
__d("objMapKeyVal",[],function(a,b,c,d,e,f){var g=function(h,i,j){var k,l=0,m={};if(!h)return h;for(k in h){if(!h.hasOwnProperty(k))continue;m[k]=i.call(j,k,h[k],l++);}return m;};e.exports=g;});
__d("ReactBrowserUtils",["ReactErrors","objMapKeyVal"],function(a,b,c,d,e,f){var g=b('ReactErrors'),h=b('objMapKeyVal');function i(l){return {"&":"&amp;",">":"&gt;","<":"&lt;","\"":"&quot;","'":"&#x27;","/":"&#x2f;"}[l];}var j=document.createElement('div'),k={getSupportedStyleMap:function(){var l={},m;for(m in j.style)l[m]=k.escapeTextForBrowser(m);return l;},getContentAccessorKey:function(){return j.innerText!==undefined?'innerText':'textContent';},escapeTextForBrowser:function(l){g.throwIf((!l||!l.indexOf)&&isNaN(l),g.ESCAPE_TYPE);return (''+l).replace(/[&><"'\/]/g,i);},supportsEvent:function(l,m){var n=document.createElement('div'),o='on'+l,p=o in n,q=!!j.addEventListener;if(!p){if(!n.setAttribute)n=document.createElement('div');if(n.setAttribute&&n.removeAttribute){n.setAttribute(o,'');p=typeof n[o]==='function';if(typeof n[o]!=='undefined')n[o]=undefined;n.removeAttribute(o);}}n=null;return (m&&q||!m)&&p;}};e.exports=k;});
__d("BrowserScroll",[],function(a,b,c,d,e,f){var g={getPageScrollLeft:function(){return window.pageXOffset||document.scrollLeft||document.body.scrollLeft||0;},getPageScrollTop:function(){return window.pageYOffset||document.scrollTop||document.body.scrollTop||0;}};e.exports=g;});
__d("ReactEnv",["ReactBrowserUtils","BrowserScroll"],function(a,b,c,d,e,f){var g=b('ReactBrowserUtils'),h=b('BrowserScroll'),i={currentPageScrollLeft:0,currentPageScrollTop:0,browserInfo:null,refreshAuthoritativeScrollValues:function(){i.currentPageScrollLeft=h.getPageScrollLeft();i.currentPageScrollTop=h.getPageScrollTop();},ensureBrowserDetected:function(){i.browserInfo=g.browserDetection();}};e.exports=i;});
__d("ReactEventConstants",[],function(a,b,c,d,e,f){var g={onScroll:1,onTouchTap:2,onTouchEnd:3,onTouchMove:4,onTouchStart:5,onTouchDrag:6,onTouchDragDone:7,onClick:8,onDragDone:9,onDrag:10,onMouseWheel:11,onKeyUp:12,onKeyDown:13,onKeyPress:14,onFocus:15,onBlur:16,onMouseIn:17,onMouseOut:18,onMouseDown:19,onMouseUp:20,onChange:21},h={mouseMove:{},mouseIn:{},mouseDown:{abstractEquivalent:g.onMouseDown},mouseUp:{abstractEquivalent:g.onMouseUp},mouseOut:{},click:{abstractEquivalent:g.onClick},mouseWheel:{abstractEquivalent:g.onMouseWheel},touchStart:{abstractEquivalent:g.onTouchStart},touchEnd:{abstractEquivalent:g.onTouchEnd},touchMove:{abstractEquivalent:g.onTouchMove},touchCancel:{},keyUp:{abstractEquivalent:g.onKeyUp},keyPress:{abstractEquivalent:g.onKeyPress},keyDown:{abstractEquivalent:g.onKeyDown},focus:{abstractEquivalent:g.onFocus},blur:{abstractEquivalent:g.onBlur},scroll:{abstractEquivalent:g.onScroll},change:{abstractEquivalent:g.onChange}},i={registrationTypes:g,topLevelEvents:h};e.exports=i;});
__d("TouchEventUtils",[],function(a,b,c,d,e,f){var g={extractSingleTouch:function(h){var i=h.touches,j=h.changedTouches,k=i&&i.length>0,l=j&&j.length>0;return !k&&l?j[0]:k?i[0]:h;}};e.exports=g;});
__d("ReactAbstractEvent",["ReactEnv","ReactEventConstants","TouchEventUtils"],function(a,b,c,d,e,f){var g=b('ReactEnv'),h=b('ReactEventConstants'),i=b('TouchEventUtils'),j=h.topLevelEvents;function k(l,m,n,o,p){this.registrationType=l;this.originatingTopLevelEventType=m;this.target=n;this.nativeEvent=o;this.data=p||{};}k.prototype.preventDefault=function(){k.preventDefaultOnNativeEvent(this.nativeEvent);};k.preventDefaultOnNativeEvent=function(l){if(l.preventDefault){l.preventDefault();}else l.returnValue=false;};k.normalizeScrollData=function(l,m){return {scrollTop:m.scrollTop,scrollLeft:m.scrollLeft,clientWidth:m.clientWidth,clientHeight:m.clientHeight,scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth};};k.normalizeMouseWheelData=function(l,m){var n=0,o=0,p=0;if(l.wheelDelta)n=l.wheelDelta/120;if(l.detail)n=-l.detail/3;p=n;if(l.axis!==undefined&&l.axis===l.HORIZONTAL_AXIS){p=0;o=-n;}if(l.wheelDeltaY!==undefined)p=l.wheelDeltaY/120;if(l.wheelDeltaX!==undefined)o=-l.wheelDeltaX/120;return {delta:n,deltaX:o,deltaY:p};};k.isNativeClickEventRightClick=function(l){return l.which?l.which===3:l.button?l.button===2:false;};k.normalizeMouseData=function(l,m){return {globalX:k.eventPageX(l),globalY:k.eventPageY(l),rightMouseButton:k.isNativeClickEventRightClick(l)};};k.normalizeDragEventData=function(l,m,n,o,p){return {globalX:m,globalY:n,startX:o,startY:p};};k.fromTopLevel=function(l,m,n){var o;switch(l){case j.mouseWheel:o=k.normalizeMouseWheelData(m,n);break;case j.scroll:o=k.normalizeScrollData(m,n);break;case j.click:case j.change:case j.mouseDown:case j.mouseUp:case j.touchMove:case j.touchStart:case j.touchEnd:o=k.normalizeMouseData(m,n);break;default:o={};}return new k(l.abstractEquivalent,l,n,m,o);};k.eventPageY=function(l){var m=i.extractSingleTouch(l);if(m){return m.pageY;}else if(typeof l.pageY!=='undefined'){return l.pageY;}else return l.clientY+g.currentPageScrollTop;};k.eventPageX=function(l){var m=i.extractSingleTouch(l);if(m){return m.pageX;}else if(typeof l.pageX!=='undefined'){return l.pageX;}else return l.clientX+g.currentPageScrollLeft;};e.exports=k;});
__d("ReactInstanceHandles",[],function(a,b,c,d,e,f){var g='.',h={findComponentRoot:function(i,j){var k=i.firstChild;while(k){if(j==k.id){return k;}else if(j.indexOf(k.id)===0)return h.findComponentRoot(k,j);k=k.nextSibling;}},getReactRootID:function(i){return '.reactRoot['+i+']';},getReactRootIDFromNodeID:function(i){var j=/\.reactRoot\[[0-9]+\]/.exec(i);return j&&j[0];},parentID:function(i){if(!i||!i.length)return '';var j=i.lastIndexOf(".");return i.substr(0,j);},walkIDHierarchy:function(i,j){var k=i;while(k){j(k);k=h.parentID(k);}},separator:g};e.exports=h;});
__d("ReactEvent",["ReactAbstractEvent","ReactBrowserUtils","ReactEnv","ReactErrors","ReactEventConstants","ReactInstanceHandles"],function(a,b,c,d,e,f){var g=b('ReactAbstractEvent'),h=b('ReactBrowserUtils'),i=b('ReactEnv'),j=b('ReactErrors'),k=b('ReactEventConstants'),l=b('ReactInstanceHandles'),m=k.registrationTypes,n=k.topLevelEvents,o=Object.keys(m),p=1,q=5,r=15,s=200,t={},u=false,v=0,w={},x=0,y=null,z=null,aa=null,ba=null,ca=0,da=null,ea=false,fa={},ga=true,ha={};function ia(fb,gb){ha[fb+'@'+gb.registrationType]=gb;}function ja(fb,gb){var hb=fb+'@'+gb;if(ha[hb])delete ha[hb];}function ka(fb){return function(gb){fb(gb||window.event);};}function la(fb,gb,hb){if(fb.addEventListener){fb.addEventListener(gb,ka(hb),false);}else if(fb.attachEvent)fb.attachEvent('on'+gb,ka(hb));}function ma(fb,gb,hb){fb.addEventListener(gb,ka(hb),true);}function na(fb){var gb=fb.target||fb.srcElement||window;return (gb.nodeType===3)?gb.parentNode:gb;}function oa(fb){return function(gb){var hb=na(gb);if(ga)db(fb,gb,hb);};}function pa(fb,gb){return fb+'@'+gb;}function qa(fb,gb,hb){la(hb,gb,oa(fb));}function ra(fb,gb,hb){ma(hb,gb,oa(fb));}function sa(fb){return !!fb.abstractEquivalent;}function ta(fb){var gb;for(gb=0;gb<fb.length;gb++){var hb=fb[gb].abstractEvent,ib=fb[gb].registration;ib.listener.call(ib.context,hb,hb.nativeEvent);}}function ua(fb,gb,hb,ib){var jb=pa(fb,m.onDrag),kb=pa(fb,m.onTouchDrag),lb=pa(fb,m.onDragDone),mb=pa(fb,m.onTouchDragDone),nb=gb===n.mouseDown?jb:gb===n.touchStart?kb:false,ob=gb===n.mouseDown?lb:gb===n.touchStart?mb:false;if(gb===n.mouseDown||gb===n.touchStart){var pb=g.eventPageX(hb),qb=g.eventPageY(hb);u=true;y=pb;z=qb;if(ha[nb]){var rb=g.normalizeMouseData(hb,ib);if(!rb.rightMouseButton){t[nb]=ha[nb];v++;var sb=ha[ob];if(sb){w[ob]=sb;x++;}aa=pb;ba=qb;ca=0;}}}}function va(fb,gb,hb,ib){var jb=sa(gb)&&pa(fb,gb.abstractEquivalent),kb=[];if(gb===n.touchEnd){var lb=g.eventPageX(hb),mb=g.eventPageY(hb),nb=Math.abs(lb-y)+Math.abs(mb-z),ob=ha[pa(fb,m.onTouchTap)];if(nb<r&&ob)kb.push({registration:ob,abstractEvent:new g(m.onTouchTap,gb,ib,hb,{})});}if(jb&&ha[jb])kb.push({abstractEvent:g.fromTopLevel(gb,hb,ib),registration:ha[jb]});return kb;}function wa(fb){if(!fb.getAttributeNode)return false;var gb=fb.getAttributeNode('id');return !!(gb&&gb.value.charAt(0)==='.');}function xa(fb,gb,hb){var ib,jb=hb,kb=hb,lb=[];if(fb===n.mouseIn){kb=gb.relatedTarget||gb.fromElement;if(kb)return;}else jb=gb.relatedTarget||gb.toElement;while(jb&&!wa(jb))jb=jb.parentNode;while(kb&&!wa(kb))kb=kb.parentNode;if(!kb&&!jb)return;var mb='',nb='',ob={value:''};if(kb)mb=(kb.getAttributeNode('id')||ob).value;if(jb)nb=(jb.getAttributeNode('id')||ob).value;var pb='',qb=0;while(nb.charAt(qb)!==''&&mb.charAt(qb)!==''&&nb.charAt(qb)===mb.charAt(qb))qb++;if(nb.charAt(qb-1)==='.'){pb=nb.substr(0,qb-1);}else pb=nb.substr(0,(nb.substr(0,qb)).lastIndexOf('.'));var rb,sb=mb,tb;if(kb){tb=0;while(sb!==pb){rb=ha[pa(sb,m.onMouseOut)];if(rb)lb.push({registration:rb,abstractEvent:new g(m.onMouseOut,fb,hb,gb,{})});sb=sb.substr(0,sb.lastIndexOf('.'));tb++;j.throwIf(tb>s,j.RUNAWAY_TREE);}}sb=nb.substr(0,pb.length);if(jb){tb=0;while(sb!==nb){sb=nb.indexOf('.',sb.length+1)===-1?nb:nb.substr(0,(nb.indexOf('.',sb.length+1)));rb=ha[pa(sb,m.onMouseIn)];if(rb)lb.push({registration:rb,abstractEvent:new g(m.onMouseIn,fb,gb,{})});j.throwIf(tb++>s,j.RUNAWAY_TREE);}}ta(lb);}function ya(fb,gb,hb){if(!u)return;var ib=g.eventPageX(gb),jb=g.eventPageY(gb);if(v){var kb=Math.abs(ib-aa)+Math.abs(jb-ba),lb=Date.now(),mb=lb-ca;if(kb<p||mb<q)return;var nb;for(nb in t){if(!t.hasOwnProperty(nb))continue;var ob=g.normalizeDragEventData(gb,ib,jb,y,z),pb=t[nb],qb=fb===n.touchMove?m.onTouchDrag:m.onDrag,rb=new g(qb,fb,hb,gb,ob);pb.listener.call(pb.context,rb,gb);}aa=ib;ba=jb;ca=lb;}}function za(fb,gb,hb){var ib=g.eventPageX(gb),jb=g.eventPageY(gb),kb,lb,mb=Math.abs(ib-y)+Math.abs(jb-z),nb=[];if(x)if(mb>p)for(lb in w){if(!w.hasOwnProperty(lb))continue;kb=w[lb];nb.push({registration:kb[lb],abstractEvent:new g(kb.registrationType,fb,hb,gb,{})});}t={};u=false;v=0;x=0;w={};y=0;z=0;return nb;}function ab(){la(window,'scroll',function(fb){if(na(fb)==window)i.refreshAuthoritativeScrollValues();});}function bb(){la(window,'resize',function(fb){if(na(fb)==window)i.refreshAuthoritativeScrollValues();});}function cb(fb,gb){ab();bb();if(!gb){qa(n.mouseMove,'mousemove',fb);qa(n.mouseIn,'mouseover',fb);qa(n.mouseDown,'mousedown',fb);qa(n.mouseUp,'mouseup',fb);qa(n.mouseOut,'mouseout',fb);qa(n.click,'click',fb);qa(n.mouseWheel,'mousewheel',fb);}else{qa(n.touchStart,'touchstart',fb);qa(n.touchEnd,'touchend',fb);qa(n.touchMove,'touchmove',fb);qa(n.touchCancel,'touchcancel',fb);}qa(n.keyUp,'keyup',fb);qa(n.keyPress,'keypress',fb);qa(n.keyDown,'keydown',fb);qa(n.change,'change',fb);qa(n.mouseWheel,'DOMMouseScroll',fb);qa(n.scroll,'scroll',fb);if(h.supportsEvent('focusin')){qa(n.focus,'focusin',fb);qa(n.blur,'focusout',fb);}else if(h.supportsEvent('focus',true)){ra(n.focus,'focus',fb);ra(n.blur,'blur',fb);}}function db(fb,gb,hb){var ib=hb.id;if(fb===n.mouseMove){ya(fb,gb,hb);return;}if(fb===n.touchMove)ya(fb,gb,hb);while(hb.parentNode&&hb.parentNode!==hb&&(ib===null||ib.length===0)){hb=hb.parentNode;ib=hb.id;}if(fb===n.mouseIn||fb===n.mouseOut){xa(fb,gb,hb);return;}var jb=[];l.walkIDHierarchy(ib,function(kb){jb=jb.concat(va(kb,fb,gb,hb));ua(kb,fb,gb,hb);});if(fb===n.mouseUp||fb===n.touchEnd||fb===n.touchCancel)jb=jb.concat(za(fb,gb,hb));ta(jb);}var eb={setEnabled:function(fb){ga=fb;},isEnabled:function(){return ga;},ensureListening:function(fb,gb){if(!fa[fb.id]){cb(fb,gb);fa[fb.id]=true;}},registerListener:function(fb,gb,hb){if(m[gb])ia(fb,{registrationType:m[gb],listener:hb});},getRegistration:function(fb,gb){return ha[fb+'@'+m[gb]];},clearAllRegistrations:function(fb){var gb;for(gb=0;gb<o.length;gb++){var hb=o[gb],ib=m[hb];ja(fb,ib);}},disableSelectionGlobally:function(){if(ea)return;da=document.onselectstart;ea=true;document.onselectstart=function(fb){g.preventDefaultOnNativeEvent(fb||window.event);};},enableSelectionGlobally:function(){if(ea){document.onselectstart=da;da=null;ea=false;}}};e.exports=eb;});
__d("ReactInputSelection",[],function(a,b,c,d,e,f){var g={hasSelectionCapabilities:function(h){return h&&((h.nodeName==='INPUT'&&h.type==='text'||h.nodeName==='TEXTAREA'));},getSelectionInformation:function(){var h=document.activeElement;return {focusedElem:h,selectionRange:g.hasSelectionCapabilities(h)?g.getSelection(h):null};},restoreSelection:function(h){var i=document.activeElement,j=h.focusedElem,k=h.selectionRange;if(i!==j&&document.getElementById(j.id)){if(g.hasSelectionCapabilities(j))g.setSelection(j,k);j.focus();}},getSelection:function(h){if(!document.selection)return {start:h.selectionStart,end:h.selectionEnd};var i=document.selection.createRange();if(i.parentElement()!==h)return {start:0,end:0};var j=h.value.length;if(h.nodeName==='INPUT'){return {start:-i.moveStart('character',-j),end:-i.moveEnd('character',-j)};}else{var k=i.duplicate();k.moveToElementText(h);k.setEndPoint('StartToEnd',i);var l=j-k.text.length;k.setEndPoint('StartToStart',i);return {start:j-k.text.length,end:l};}},setSelection:function(h,i){var j=i.start,k=i.end;if(typeof k==='undefined')k=j;if(document.selection){if(h.tagName==='TEXTAREA'){var l=(h.value.slice(0,j).match(/\r/g)||[]).length,m=(h.value.slice(j,k).match(/\r/g)||[]).length;j-=l;k-=l+m;}var n=h.createTextRange();n.collapse(true);n.moveStart('character',j);n.moveEnd('character',k-j);n.select();}else{h.selectionStart=j;h.selectionEnd=Math.min(k,h.value.length);h.focus();}}};e.exports=g;});
__d("ReactOnDOMReady",["ReactErrors"],function(a,b,c,d,e,f){var g=b('ReactErrors'),h=null,i={enqueue:function(j,k){g.throwIf(!h,g.ON_DOM_READY_MISMATCH);h.push({instance:j,callback:k});},beginEnqueueing:function(){g.throwIf(h,g.ON_DOM_READY_MISMATCH);h=[];},notifyAll:function(){var j=h,k=j.length;g.throwIf(!j,g.ON_DOM_READY_MISMATCH);h=null;for(var l=0;l<k;l=l+1){var m=j[l].instance,n=j[l].callback;n.call(m,m.getDOMNode());}j.length=0;}};e.exports=i;});
__d("ReactDOMTransaction",["ReactErrors","ReactEvent","ReactInputSelection","ReactOnDOMReady"],function(a,b,c,d,e,f){var g=b('ReactErrors'),h=b('ReactEvent'),i=b('ReactInputSelection'),j=b('ReactOnDOMReady'),k=null,l={totalOnDomReadyTime:0,perform:function(m,n){l.initialize();try{m.call(n);}catch(o){throw o;}finally{l.close();}},initialize:function(){g.throwIf(k,g.DUAL_TRANSACTION);h.setEnabled(false);j.beginEnqueueing();k={selectionInformation:i.getSelectionInformation()};},close:function(){g.throwIf(!k,g.MISSING_TRANSACTION);i.restoreSelection(k.selectionInformation);h.setEnabled(true);k=null;var m=Date.now();j.notifyAll();l.totalOnDomReadyTime+=(Date.now()-m);}};e.exports=l;});
__d("ReactMount",["ReactErrors","ReactEvent","ReactInstanceHandles"],function(a,b,c,d,e,f){var g=b('ReactErrors'),h=b('ReactEvent'),i=b('ReactInstanceHandles'),j=0,k={instanceByReactRootId:{},containersByReactRootId:{},totalInstantiationTime:0,totalInjectionTime:0,useTouchEvents:false,scrollMonitor:function(l,m){return m();},prepareForRendering:function(l){h.ensureListening(l,k.useTouchEvents);},renderComponent:function(l,m){g.throwIf(!m,g.NO_RENDER_NODE);k.prepareForRendering(document.documentElement);k.renderMarkupIntoNode(l,m);return l;},constructAndRenderComponent:function(l,m,n){k.renderComponent(l(m),n);},renderMarkupIntoNode:function(l,m){var n=this.registerContainer(m);k.instanceByReactRootId[n]=l;l.genMarkupIntoContainer(n,m);},registerContainer:function(l){var m=i.getReactRootID(j);k.containersByReactRootId[m]=l;j++;return m;},destroyAndReleaseReactRootNode:function(l){var m=k.getInstanceHeldByContainer(l),n=l.firstChild&&l.firstChild.id;m.destroy();delete k.instanceByReactRootId[n];delete k.containersByReactRootId[n];l.innerHTML='';},getInstanceHeldByContainer:function(l){var m=k.instanceByReactRootId[l.firstChild&&l.firstChild.id];return m;},findReactContainerForId:function(l){return k.containersByReactRootId[i.getReactRootIDFromNodeID(l)];},renderOrUpdateComponent:function(l,m){var n=k.getInstanceHeldByContainer(m);if(n){var o=n.updateAllProps.bind(n,l.props);k.scrollMonitor(m,o);return n;}else return k.renderComponent(l,m);}};e.exports=k;});
__d("mergeHelpers",["keyMirror","throwIf"],function(a,b,c,d,e,f){var g=b('keyMirror'),h=b('throwIf'),i=36,j=g({MERGE_ARRAY_FAIL:null,MERGE_CORE_FAILURE:null,MERGE_TYPE_USAGE_FAILURE:null,MERGE_DEEP_MAX_LEVELS:null,MERGE_DEEP_NO_ARR_STRATEGY:null}),k=function(m){return typeof m!=='object'||m===null;},l={MAX_MERGE_DEPTH:i,isTerminal:k,normalizeMergeArg:function(m){return m===undefined||m===null?{}:m;},checkMergeArrayArgs:function(m,n){h(!Array.isArray(m)||!Array.isArray(n),j.MERGE_CORE_FAILURE);},checkMergeObjectArgs:function(m,n){var o=k(m)||k(n)||Array.isArray(m)||Array.isArray(n);h(o,j.MERGE_CORE_FAILURE);},checkMergeLevel:function(m){h(m>=i,j.MERGE_DEEP_MAX_LEVELS);},checkArrayStrategy:function(m){h(m!==undefined&&!(m in l.ArrayStrategies),j.MERGE_DEEP_NO_ARR_STRATEGY);},ArrayStrategies:g({Clobber:true,IndexByIndex:true}),ERRORS:j};e.exports=l;});
__d("merge",["mergeHelpers"],function(a,b,c,d,e,f){var g=b('mergeHelpers'),h=g.checkMergeObjectArgs,i=g.normalizeMergeArg,j=function(k,l){var m=i(k),n=i(l);h(m,n);var o={};for(var p in m)if(m.hasOwnProperty(p))o[p]=m[p];for(var q in n)if(n.hasOwnProperty(q))o[q]=n[q];return o;};e.exports=j;});
__d("ReactComponent",["ReactDOMTransaction","ReactErrors","ReactInstanceHandles","ReactMount","merge"],function(a,b,c,d,e,f){var g=b('ReactDOMTransaction'),h=b('ReactErrors'),i=b('ReactInstanceHandles'),j=b('ReactMount'),k=b('merge'),l={currentlyConstructingOwner:null,isValidComponent:function(m){return (m&&typeof m.genMarkupIntoContainer==='function'&&typeof m.updateAllProps==='function');},validateReactComponentInstance:function(m){h.throwIf(!l.isValidComponent(m),h.INVALID_COMPONENT);},ReactComponentMixin:{getDOMNode:function(){var m=this.rootDomNode;if(!m){m=document.getElementById(this._rootDomId);if(!m){var n=j.findReactContainerForId(this._rootDomId);m=i.findComponentRoot(n,this._rootDomId);}}return (this.rootDomNode=m);},captureOwnerAtConstruction:function(){var m=this.props;if(m.ref)m.owner=l.currentlyConstructingOwner;},attachOwnersRefsOnRender:function(){var m=this.props;if(m.ref)m.owner.attachRef(m.ref,this);},detachOwnersRefs:function(){var m=this.props;if(m.ref&&m.owner.refs[m.ref]===this)m.owner.detachRef(m.ref);},destroyComponent:function(){this.detachOwnersRefs();this.isDestroyed=true;},detachFromDom:function(){var m=this.getDOMNode();m.parentNode.removeChild(m);},destroyAndDetachFromDom:function(){this.destroy();this.detachFromDom();},initializeComponent:function(m){this._rootDomId=m;this.attachOwnersRefsOnRender();},handleGenMarkup:function(){},handleUpdateAllProps:function(){},updateProps:function(m){this.updateAllProps(k(this.props,m));},updateAllProps:function(m){if(m.isStatic)return;g.perform(this.handleUpdateAllProps.bind(this,m));},genMarkupIntoContainer:function(m,n){g.perform(this.genMarkupIntoContainerImpl.bind(this,m,n));},genMarkupIntoContainerImpl:function(m,n){var o=Date.now(),p=this.handleGenMarkup(m);j.totalInstantiationTime+=(Date.now()-o);var q=Date.now(),r=n.nextSibling,s=n.parentNode;if(s){s.removeChild(n);n.innerHTML=p;if(r){s.insertBefore(n,r);}else s.appendChild(n);}else n.innerHTML=p;j.totalInjectionTime+=(Date.now()-q);},handleUpdateAllPropsComponent:function(m){var n=this.props,o=this.rootDomId;h.throwIf(o,h.CONTROL_WITHOUT_BACKING_DOM);if(m.owner===n.owner&&m.ref===n.ref)return;this.detachOwnersRefs();if(m.ref)m.owner.attachRef(m.ref,this);}}};e.exports=l;});
__d("ReactDOMAttributes",["ReactBrowserUtils","ReactEnv","ReactEvent","objMapKeyVal"],function(a,b,c,d,e,f){var g=b('ReactBrowserUtils'),h=b('ReactEnv'),i=b('ReactEvent'),j=b('objMapKeyVal'),k=function(s){return s;},l=g.getContentAccessorKey(),m=g.getSupportedStyleMap(),n=function(s){return s.replace(/[A-Z]/g,function(t){return '-'+t.toLowerCase();});},o=function(s,t,u){return j(u,function(v,w){return s+w(v)+t;});},p=j(m,function(){return n;}),q={className:function(){return 'class';},margin:n,marginRight:n,marginLeft:n,tabIndex:k,marginTop:n,marginBottom:n,padding:n,paddingRight:n,paddingLeft:n,paddingTop:n,paddingBottom:n,dir:k,width:k,height:k,alt:k,src:k,value:k,checked:k,href:k,placeholder:k,title:k,selected:k,target:k,scrollTop:k,scrollLeft:k,name:k,type:k,htmlFor:k,rel:k,ajaxify:k,allowfullscreen:k,allowscriptaccess:k,wmode:k,contentEditable:k,x1:k,x2:k,y1:k,y2:k,transform:k,opacity:k,'stroke-width':k,'stroke-linecap':k,stroke:k},r={CONTENT_ACCESSOR_KEY:l,customAttrRegexp:/^(data|aria)-[a-z_][a-z\d_.\-]*$/,styleFeatureNames:o(';',':',p),allTagAttrPieces:o('','=\'',q),cssNumber:{textDecoration:true,zoom:true,fillOpacity:true,fontWeight:true,opacity:true,orphans:true,zIndex:true,outline:true},controlSimply:{className:true,scrollTop:true,scrollLeft:true,title:true,rows:true,cols:true,size:true},controlDirectlyNonIdempotent:{value:true,src:true,checked:true,selected:true,rel:true},controlUsingSetAttr:{ajaxify:true,margin:true,marginRight:true,marginLeft:true,marginTop:true,marginBottom:true,padding:true,paddingRight:true,paddingLeft:true,paddingTop:true,paddingBottom:true,width:true,height:true,href:true,placeholder:true,target:true}};e.exports=r;});
__d("ReactDOMUtils",["ReactBrowserUtils","ReactDOMAttributes"],function(a,b,c,d,e,f){var g=b('ReactBrowserUtils'),h=b('ReactDOMAttributes'),i=h.cssNumber,j=g.escapeTextForBrowser,k=h.styleFeatureNames;function l(s,t,u){if(u){if(u.nextSibling){return s.insertBefore(t,u.nextSibling);}else return s.appendChild(t);}else return s.insertBefore(t,s.firstChild);}function m(s,t,u){var v,w,x=t.length;for(w=0;w<x;w++)v=l(s,t[0],v||u);return v;}function n(s,t,u){if(!t)return 0;var v=document.createElement(s?s.tagName:'div');v.innerHTML=t;var w=v.childNodes,x=w.length,y=u?s.childNodes[u-1]:null;m(s,w,y);return x;}function o(s,t,u){var v=s.childNodes;if(t.parentNode)t.parentNode.removeChild(t);if(u>=v.length){s.appendChild(t);}else s.insertBefore(t,v[u]);return t;}function p(s,t){if(!isNaN(t))return i[s]?t:(j(t)+'px');return (t!==0&&!t)?'':t;}function q(s){var t='',u;for(u in s){if(!s.hasOwnProperty(u))continue;var v=s[u];if(v!==undefined)t+=k[u]+p(u,v);}return t;}var r={insertNodeAfterNode:l,insertNodeAt:o,insertMarkupAt:n,serializeInlineStyle:q};e.exports=r;});
__d("fallbackSerializePosInfo",[],function(a,b,c,d,e,f){var g=function(h){if(!h)return '';var i=';',j=h.w,k=h.h,l=h.l,m=h.t,n=h.b,o=h.r,p=h.z;if(j===0||j)i+='width:'+(j.charAt?(j+';'):(j+'px;'));if(k===0||k)i+='height:'+(k.charAt?(k+';'):(k+'px;'));if(l===0||l)i+='left:'+(l.charAt?(l+';'):(l+'px;'));if(m===0||m)i+='top:'+(m.charAt?(m+';'):(m+'px;'));if(n===0||n)i+='bottom:'+(n.charAt?(n+';'):(n+'px;'));if(o===0||o)i+='right:'+(o.charAt?(o+';'):(o+'px;'));if(p===0||p)i+='z-index:'+p+';';i+='position:absolute';return i;};e.exports=g;});
__d("keyOf",[],function(a,b,c,d,e,f){var g=function(h){var i;for(i in h){if(!h.hasOwnProperty(i))continue;return i;}return null;};e.exports=g;});
__d("renderer-renderClassSet",[],function(a,b,c,d,e,f){function g(h,i){var j='',k;if(Array.isArray(h)){for(var l=0;l<h.length;l++){j+=g(h[l],i);i=i||!!j;}}else for(k in h)if(h[k]){if(i)j+=' ';j+=k;i=true;}return j;}e.exports=g;});
__d("ReactDOMGeneration",["ReactBrowserUtils","ReactDOMAttributes","ReactDOMUtils","ReactEvent","ReactEventConstants","fallbackSerializePosInfo","keyOf","renderer-renderClassSet"],function(a,b,c,d,e,f){var g=b('ReactBrowserUtils'),h=b('ReactDOMAttributes'),i=b('ReactDOMUtils'),j=b('ReactEvent'),k=b('ReactEventConstants'),l=b('fallbackSerializePosInfo'),m=b('keyOf'),n=k.registrationTypes,o=h.allTagAttrPieces,p=h.customAttrRegexp,q=g.escapeTextForBrowser,r=l,s=j.registerListener,t=b('renderer-renderClassSet'),u=i.serializeInlineStyle,v=m({classSet:null}),w=m({style:null}),x=m({posInfo:null}),y={handleGenMarkupDOMGeneration:function(){var aa,ba=this.props,ca='',da='';for(aa in ba){if(!ba.hasOwnProperty(aa))continue;var ea=ba[aa];if(ea===null||typeof ea==='undefined')continue;if(aa===v){ca+='class="'+t(ea)+'"';}else if(o[aa]){ca+=o[aa]+q(ea)+"'";}else if(aa===w){da+=q(u(ea));}else if(aa===x){da+=q(r(ea));}else if(n[aa]){s(this._rootDomId,aa,ea);}else if(p.test(aa))ca+=aa+"='"+q(ea)+"'";}if(da)ca+=' style="'+da+'"';ca+=' id="'+this._rootDomId+'">';if(ba.content){ca+=q(ba.content);}else if(ba.dangerouslySetInnerHtml)ca+=ba.dangerouslySetInnerHtml.__html;return ca;}},z={ReactNativeComponentGenerationMixin:y,setAcceleratedPositioner:function(aa){r=aa;}};e.exports=z;});
__d("ReactDOMMutation",["ReactDOMAttributes","ReactDOMUtils","ReactEvent","ReactEventConstants","fallbackSerializePosInfo","keyOf","renderer-renderClassSet"],function(a,b,c,d,e,f){var g=b('ReactDOMAttributes'),h=b('ReactDOMUtils'),i=b('ReactEvent'),j=b('ReactEventConstants'),k=b('fallbackSerializePosInfo'),l=b('keyOf'),m=j.registrationTypes,n=g.controlDirectlyNonIdempotent,o=g.controlSimply,p=g.controlUsingSetAttr,q=g.customAttrRegexp,r=i.registerListener,s=b('renderer-renderClassSet'),t=h.serializeInlineStyle,u=k,v=l({classSet:null}),w=g.CONTENT_ACCESSOR_KEY,x=l({content:null}),y=l({dangerouslySetInnerHtml:null}),z=l({posInfo:null}),aa=l({style:null}),ba=function(ea){u=ea;},ca={handleUpdateAllPropsDOMMutation:function(ea){var fa=this.props,ga='',ha='',ia='',ja;for(ja in ea){if(!ea.hasOwnProperty(ja))continue;var ka=ea[ja];if(ja===v){if(JSON.stringify(fa.classSet)!==JSON.stringify(ea.classSet))this.getDOMNode().className=s(ka);}else if(ja===aa){if(JSON.stringify(ka)!==JSON.stringify(fa.style))ha=t(ka);}else if(ja===z){var la=ka,ma=fa.posInfo||{};if(la&&(la.l!==ma.l||la.t!==ma.t||la.w!==ma.w||la.h!==ma.h||la.r!==ma.r||la.b!==ma.b))ia=u(ka);}else if(ka!==fa[ja])if(p[ja]){this.getDOMNode().setAttribute(ja,ka);}else if(ja===x){this.getDOMNode()[w]=ka;}else if(o[ja]){this.getDOMNode()[ja]=ka;}else if(n[ja]){var na=this.getDOMNode();if(na[ja]!==ka)na[ja]=ka;}else if(m[ja]){r(this._rootDomId,ja,ka);}else if(ja===y){var oa=fa[ja],pa=ka,qa=oa&&oa.__html,ra=pa&&pa.__html;if(qa!==ra)this.getDOMNode().innerHTML=(ra||'').replace(/^ /g,'&nbsp;');}else if(q.test(ja))this.getDOMNode().setAttribute(ja,ka);}if(ha&&!ia)ia=u(ea.posInfo);if(ia&&!ha)ha=t(ea.style);if(ha||ia){ga+=ha;ga+=ia;this.getDOMNode().style.cssText=ga;}}},da={setAcceleratedPositioner:ba,ReactNativeComponentMutationMixin:ca};e.exports=da;});
__d("ReactMultiChild",["ReactComponent","ReactDOMUtils"],function(a,b,c,d,e,f){var g=b('ReactComponent'),h=b('ReactDOMUtils'),i=h.insertNodeAt;function j(n,o){return n&&o&&n.constructor===o.constructor;}function k(n,o){return n&&!o||(n&&o&&n.constructor!==o.constructor);}var l={destroyMultiChild:function(){var n=this.renderedChildren,o;for(o in n){if(!n.hasOwnProperty(o))continue;if(n[o])n[o].destroy();}this.renderedChildren=null;},handleGenMarkupMultiChild:function(n){var o,p='',q=0;for(o in n){var r=n[o];if(r){r.domIndex=q;p+=n[o].handleGenMarkup(this._rootDomId+'.'+o);q++;}}this.renderedChildren=n;return p;},insertMarkupAt:function(n,o){return !n?0:h.insertMarkupAt(this.getDOMNode(),n,o);},enqueueMove:function(n,o,p){if(o===p)return n;if(!n)n={};var q=this.getDOMNode();n[p]=q.childNodes[o];return n;},handleUpdateAllPropsMultiChild:function(n){if(!n&&!this.renderedChildren){return;}else if(n&&!this.renderedChildren){this.renderedChildren={};}else if(!n&&this.renderedChildren)n={};var o,p=this._rootDomId+'.',q='',r=0,s=0,t=0,u;for(o in n){if(!n.hasOwnProperty(o))continue;var v=this.renderedChildren[o],w=n[o];if(j(v,w)){t+=this.insertMarkupAt(q,s);q='';var x=w.props.isStatic;if(!x)v.handleUpdateAllProps(w.props);var y=v.domIndex+t;u=this.enqueueMove(u,y,r);v.domIndex=r;r++;s=r;}else{if(v){this.removeChildByName(o,v);t--;}if(w){this.renderedChildren[o]=w;q+=w.handleGenMarkup(p+o);w.domIndex=r;r++;}}}t+=this.insertMarkupAt(q,s);for(o in this.renderedChildren){if(!this.renderedChildren.hasOwnProperty(o))continue;var z=this.renderedChildren[o];if(k(z,n[o]))this.removeChildByName(o,z);}if(u){var aa,ba=this.getDOMNode();for(aa in u){if(!u.hasOwnProperty(aa))continue;i(ba,u[aa],aa);}}},removeChildByName:function(n,o){if(g.isValidComponent(o))o.destroyAndDetachFromDom();delete this.renderedChildren[n];}},m={ReactMultiChildMixin:l};e.exports=m;});
__d("mixInto",[],function(a,b,c,d,e,f){var g=function(h,i){var j;for(j in i){if(!i.hasOwnProperty(j))continue;h.prototype[j]=i[j];}};e.exports=g;});
__d("ReactTextComponent",["ReactBrowserUtils","ReactDOMAttributes","ReactComponent","mixInto"],function(a,b,c,d,e,f){var g=b('ReactBrowserUtils'),h=b('ReactDOMAttributes'),i=b('ReactComponent'),j=g.escapeTextForBrowser,k=b('mixInto'),l=h.CONTENT_ACCESSOR_KEY,m=function(n){this.props=n;};k(m,i.ReactComponentMixin);m.prototype.handleUpdateAllProps=function(n){if(n!==this.props){this.getDOMNode()[l]=n;this.props=n;}};m.prototype.destroy=function(){};m.prototype.handleGenMarkup=function(n){this._rootDomId=n;return ('<span id="'+n+'">'+j(this.props)+'</span>');};e.exports=m;});
__d("flattenChildren",["ReactTextComponent"],function(a,b,c,d,e,f){var g=b('ReactTextComponent'),h=function(j,k,l){var m,n;if(Array.isArray(k)){for(m=0;m<k.length;m++)h(j,k[m],l+'['+m+']');}else if(!k&&k!==0){j[l]=null;}else if(k.genMarkupIntoContainer){j[l]=k;}else{var o=typeof k;if(o==='string'||o==='number'){j[l]=new g(k);}else if(o==='object')for(n in k)if(k.hasOwnProperty(n))h(j,k[n],l+'{'+n+'}');}};function i(j){if(j===null||j===undefined)return j;var k={};h(k,j,'');return k;}e.exports=i;});
__d("ReactDOM",["ReactComponent","ReactDOMGeneration","ReactDOMMutation","ReactErrors","ReactEvent","ReactMultiChild","flattenChildren","mixInto","objMapKeyVal","throwIf"],function(a,b,c,d,e,f){var g=b('ReactComponent'),h=b('ReactDOMGeneration'),i=b('ReactDOMMutation'),j=b('ReactErrors'),k=b('ReactEvent'),l=b('ReactMultiChild'),m=h.ReactNativeComponentGenerationMixin,n=i.ReactNativeComponentMutationMixin,o=b('flattenChildren'),p=b('mixInto'),q=b('objMapKeyVal'),r=b('throwIf');function s(u,v){var w='<'+u+' ',x=v?'':'</'+u+'>',y=function(ba){this.props=ba;this.captureOwnerAtConstruction();},z={handleUpdateAllProps:function(ba){j.throwIf(!this._rootDomId,j.CONTROL_WITHOUT_BACKING_DOM);this.handleUpdateAllPropsComponent(ba);this.handleUpdateAllPropsDOMMutation(ba);this.handleUpdateAllPropsMultiChild(o(ba.children));this.props=ba;},handleGenMarkup:function(ba){this.initializeComponent(ba);var ca=w+this.handleGenMarkupDOMGeneration()+this.handleGenMarkupMultiChild(o(this.props.children))+x;return ca;},destroy:function(){this.destroyComponent();this.destroyMultiChild();k.clearAllRegistrations(this._rootDomId);}};p(y,g.ReactComponentMixin);p(y,z);p(y,m);p(y,n);p(y,l.ReactMultiChildMixin);y.prototype.tagName=u.toUpperCase();var aa=function(ba){return new y(ba);};return aa;}var t=q({a:false,abbr:false,address:false,audio:false,b:false,br:true,button:false,code:false,col:true,colgroup:false,dd:false,div:false,section:false,dl:false,dt:false,em:false,embed:true,fieldset:false,form:false,g:false,h1:false,h2:false,h3:false,h4:false,h5:false,h6:false,hr:true,i:false,iframe:false,img:true,input:false,label:false,legend:false,li:false,line:false,object:false,ol:false,optgroup:false,option:false,p:false,param:true,pre:false,select:false,small:false,span:false,strong:false,svg:false,table:false,tbody:false,td:false,textarea:false,tfoot:false,th:false,thead:false,time:false,title:false,tr:false,ul:false,video:false,wbr:false},s);e.exports=t;});
__d("ReactOwner",[],function(a,b,c,d,e,f){var g={attachRef:function(h,i){var j=this.refs||(this.refs={});j[h]=i;},detachRef:function(h){delete this.refs[h];}};e.exports=g;});
__d("mergeDeepInto",["keyMirror","mergeHelpers","throwIf"],function(a,b,c,d,e,f){var g=b('keyMirror'),h=b('mergeHelpers'),i=b('throwIf'),j=h.ArrayStrategies,k=h.checkArrayStrategy,l=h.checkMergeArrayArgs,m=h.checkMergeLevel,n=h.checkMergeObjectArgs,o=h.isTerminal,p=h.normalizeMergeArg,q=g({RUN_TIME_ARRAY_MERGE_FAIL:null}),r=function(v,w,x,y){n(v,w);m(y);var z=w?Object.keys(w):[];for(var aa=0;aa<z.length;aa++){var ba=z[aa];t(v,w,ba,x,y);}},s=function(v,w,x,y){l(v,w);m(y);var z=Math.max(v.length,w.length);for(var aa=0;aa<z;aa++)t(v,w,aa,x,y);},t=function(v,w,x,y,z){var aa=w[x],ba=w.hasOwnProperty(x),ca=ba&&o(aa),da=ba&&Array.isArray(aa),ea=ba&&!da&&!da,fa=v[x],ga=v.hasOwnProperty(x),ha=ga&&o(fa),ia=ga&&Array.isArray(fa),ja=ga&&!ia&&!ia;if(ha){if(ca){v[x]=aa;}else if(da){v[x]=[];s(v[x],aa,y,z+1);}else if(ea){v[x]={};r(v[x],aa,y,z+1);}else if(!ba)v[x]=fa;}else if(ia){if(ca){v[x]=aa;}else if(da){i(!j[y],h.ERRORS.RUN_TIME_ARRAY_MERGE_FAIL);if(y===j.Clobber)fa.length=0;s(fa,aa,y,z+1);}else if(ea){v[x]={};r(v[x],aa,y,z+1);}else !ba;}else if(ja){if(ca){v[x]=aa;}else if(da){v[x]=[];s(v[x],aa,y,z+1);}else if(ea){r(fa,aa,y,z+1);}else !ba;}else if(!ga)if(ca){v[x]=aa;}else if(da){v[x]=[];s(v[x],aa,y,z+1);}else if(ea){v[x]={};r(v[x],aa,y,z+1);}else !ba;},u=function(v,w,x){var y=p(w);k(x);r(v,y,x,0);};e.exports=u;});
__d("mergeInto",["mergeHelpers"],function(a,b,c,d,e,f){var g=b('mergeHelpers'),h=g.checkMergeObjectArgs,i=g.normalizeMergeArg,j=function(k,l){var m=i(l),n;h(k,m);for(n in m){if(!m.hasOwnProperty(n))continue;k[n]=m[n];}};e.exports=j;});
__d("ReactCompositeComponent",["ReactComponent","ReactDOMTransaction","ReactDOMUtils","ReactErrors","ReactOnDOMReady","ReactOwner","keyOf","mergeDeepInto","mergeHelpers","mergeInto","mixInto"],function(a,b,c,d,e,f){var g=b('ReactComponent'),h=b('ReactDOMTransaction'),i=b('ReactDOMUtils'),j=b('ReactErrors'),k=b('ReactOnDOMReady'),l=b('ReactOwner'),m=b('keyOf'),n=b('mergeDeepInto'),o=b('mergeHelpers'),p=b('mergeInto'),q=b('mixInto'),r=i.insertMarkupAt,s=o.isTerminal,t=Array.prototype.slice,u={render:function(){},handleUpdateAllProps:function(w){this.handleUpdateAllPropsComponent(w);if(this.propTrigger){var x=this.propTrigger(w);if(x)p(this.state,x);}if(this.needsRedraw&&!this.needsRedraw(w))return;this.props=w;this.handleReconcile();},initializeCompositeComponent:function(w){if(this.getInitialState)this.state=this.getInitialState();this.onDomReady&&k.enqueue(this,this.onDomReady);},handleGenMarkup:function(w){this.initializeComponent(w);this.initializeCompositeComponent(w);g.currentlyConstructingOwner=this;var x=this.getAllRenderResults(),y=this.handleGenMarkupResults(x);g.currentlyConstructingOwner=null;g.validateReactComponentInstance(y);this.renderedChild=y;return y.handleGenMarkup(w);},getAllRenderResults:function(){return this.render();},handleGenMarkupResults:function(w){return w;},destroy:function(){this.destroyComponent();if(this.destructor)this.destructor();this.renderedChild.destroy();this.renderedChild=null;if(this.refs)this.refs=null;},justUpdateState:function(w){h.perform(function(){p(this.state,w);},this);},justUpdateStateDeep:function(w){h.perform(function(){n(this.state,w);},this);},updateState:function(w){h.perform(function(){p(this.state,w);this.handleReconcile();},this);return true;},updateStateDeep:function(w){h.perform(function(){n(this.state,w);this.handleReconcile();},this);return true;},createStateUpdater:function(w){var x=this;if(!w)return w;return function(){x.updateState(w);};},stateUpdater:function(w){var x=this;if(!w)return w;return (typeof w==='function')?function(){x.updateState(w.apply(x,arguments));}:function(){x.updateState(w);};},stateValueForwarder:function(w){var x=this;return function(y){var z=m(w),aa={};if(z){aa[z]=y;x.updateState(aa);}};},stateUpdaterCurry:function(w){var x=this,y=t.call(arguments,1);return function(){x.updateState(w.apply(x,y.concat(t.call(arguments))));};},reconcile:function(){h.perform(this.handleReconcile,this);},handleReconcile:function(){g.currentlyConstructingOwner=this;var w=this.getAllRenderResults();g.currentlyConstructingOwner=null;var x=this.reconcileResults(w);g.validateReactComponentInstance(x);if(!x.props.isStatic){var y=this.renderedChild;if(y.constructor===x.constructor){y.handleUpdateAllProps(x.props);}else{var z=x.handleGenMarkup(this._rootDomId),aa=y.getDOMNode(),ba=aa.parentNode;y.destroyAndDetachFromDom();r(ba,z,0);this.renderedChild=x;}}},reconcileResults:function(w){return w;}},v={createComponentConstructor:function(w){var x=w.mixins,y=function(aa){this.props=aa||{};this.captureOwnerAtConstruction();};q(y,g.ReactComponentMixin);q(y,u);q(y,l);if(x){var z;for(z=0;z<x.length;z++)q(y,x[z]);}q(y,w);j.throwIf(!y.prototype.render,j.CLASS_SPEC);return y;},createComponent:function(w){var x=v.createComponentConstructor(w),y=function(z){return new x(z);};y.componentConstructor=x;y.originalSpec=w;return y;},ReactCompositeComponentMixin:u};e.exports=v;});
__d("React",["ReactCompositeComponent","ReactMount"],function(a,b,c,d,e,f){var g=b('ReactCompositeComponent'),h=b('ReactMount'),i={initializeTouchEvents:function(j){h.useTouchEvents=j;},createComponent:g.createComponent,constructAndRenderComponent:h.constructAndRenderComponent,renderComponent:h.renderComponent,renderOrUpdateComponent:h.renderOrUpdateComponent,destroyAndReleaseReactRootNode:h.destroyAndReleaseReactRootNode};e.exports=i;});
__d("NumberFormat",["Env"],function(a,b,c,d,e,f){var g=b('Env'),h=/(\d{3})(?=\d)/g,i=10000,j=function(l){return (''+l).split('').reverse().join('');},k={formatIntegerWithDelimiter:function(l,m){if((g.locale=='nb_NO'||g.locale=='nn_NO')&&(Math.abs(l)<i))return l.toString();var n=j(l);return j(n.replace(h,'$1'+m));}};e.exports=k;});
__d("UFIConstants",[],function(a,b,c,d,e,f){var g={COMMENT_LIKE:'fa-type:comment-like',COMMENT_SET_SPAM:'fa-type:mark-spam',DELETE_COMMENT:'fa-type:delete-comment',LIVE_DELETE_COMMENT:'fa-type:live-delete-comment',LIKE_ACTION:'fa-type:like',REMOVE_PREVIEW:'fa-type:remove-preview',CONFIRM_COMMENT_REMOVAL:'fa-type:confirm-remove',TRANSLATE_COMMENT:'fa-type:translate-comment',UNDO_DELETE_COMMENT:'fa-type:undo-delete-comment'},h={DELETED:'status:deleted',SPAM:'status:spam',SPAM_DISPLAY:'status:spam-display',LIVE_DELETED:'status:live-deleted',FAILED_ADD:'status:failed-add',FAILED_EDIT:'status:failed-edit',PENDING_EDIT:'status:pending-edit',PENDING_UNDO_DELETE:'status:pending-undo-delete'},i={MOBILE:1,SMS:3,EMAIL:4},j={PROFILE:0,NEWS_FEED:1,OBJECT:2,MOBILE:3,EMAIL:4,PROFILE_APROVAL:10,TICKER:12,NONE:13,INTERN:14,ADS:15},k={UNKNOWN:0,INITIAL_SERVER:1,LIVE_SEND:2,USER_ACTION:3,ENDPOINT_LIKE:10,ENDPOINT_COMMENT_LIKE:11,ENDPOINT_ADD_COMMENT:12,ENDPOINT_EDIT_COMMENT:13,ENDPOINT_DELETE_COMMENT:14,ENDPOINT_UNDO_DELETE_COMMENT:15,ENDPOINT_COMMENT_SPAM:16,ENDPOINT_REMOVE_PREVIEW:17,ENDPOINT_ID_COMMENT_FETCH:18,ENDPOINT_COMMENT_FETCH:19,ENDPOINT_TRANSLATE_COMMENT:20,ENDPOINT_BAN:21},l=50,m=.6,n=420,o=5,p=80;e.exports={UFIActionType:g,UFIStatus:h,UFISourceType:i,UFIFeedbackSourceType:j,UFIPayloadSourceType:k,defaultPageSize:l,commentTruncationLength:n,commentTruncationPercent:m,commentTruncationMaxLines:o,attachmentTruncationLength:p};});
__d("UFIBlingBox",["ReactDOM","NumberFormat","React","UFIConstants","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('NumberFormat'),i=b('React'),j=b('UFIConstants'),k=b('copyProperties'),l=b('tx'),m=i.createComponent({render:function(){var o=[],p='';if(this.props.likes){o.push(n({count:this.props.likes,classSet:{mls:o.length>0},iconClassName:"UFIBlingBoxLikeIcon",contextArgs:this.props.contextArgs}));p+=(this.props.likes==1)?"1 like":l._("{count} likes",{count:this.props.likes});p+=' ';}if(this.props.comments){o.push(n({count:this.props.comments,classSet:{mls:o.length>0},iconClassName:"UFIBlingBoxCommentIcon",contextArgs:this.props.contextArgs}));p+=(this.props.comments==1)?"1 comment":l._("{count} comments",{count:this.props.comments});p+=' ';}if(this.props.reshares){o.push(n({count:this.props.reshares,classSet:{mls:o.length>0},iconClassName:"UFIBlingBoxReshareIcon",contextArgs:this.props.contextArgs}));p+=(this.props.reshares==1)?"1 share":l._("{count} shares",{count:this.props.reshares});}var q=g.a({classSet:{UFIBlingBox:true,uiBlingBox:true,feedbackBling:true},href:this.props.permalink,'data-ft':this.props['data-ft'],'aria-label':p,children:o});if(this.props.comments<j.defaultPageSize){q.props.onClick=this.props.onClick;q.props.rel='ignore';}return q;}}),n=i.createComponent({render:function(){var o={UFIBlingBoxSprite:true};o[this.props.iconClassName]=true;k(o,this.props.classSet);var p=h.formatIntegerWithDelimiter(this.props.count,this.props.contextArgs.numberdelimiter||',');return (g.span({children:[g.i({classSet:o}),g.span({classSet:{UFIBlingBoxText:true},children:p})]}));}});e.exports=m;});
__d("UFICentralUpdates",["Arbiter","ChannelConstants","LiveTimer","ShortProfiles","UFIConstants","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ChannelConstants'),i=b('LiveTimer'),j=b('ShortProfiles'),k=b('UFIConstants'),l=b('copyProperties'),m=b('tx'),n=0,o={},p={},q={},r={},s=[];g.subscribe(h.getArbiterType('live-data'),function(x,y){if(y&&y.obj){var z=y.obj,aa=z.comments||[];aa.forEach(function(ba){ba.timestamp.text="a few seconds ago";});w.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,z);}});function t(){if(!n){var x=q,y=o,z=p,aa=r;q={};o={};p={};r={};if(Object.keys(x).length)v('feedback-id-changed',x);if(Object.keys(y).length)v('feedback-updated',y);if(Object.keys(z).length)v('comments-updated',z);if(Object.keys(aa).length)v('instance-updated',aa);s.pop();}}function u(){if(s.length){return s[s.length-1];}else return k.UFIPayloadSourceType.UNKNOWN;}function v(event,x){w.inform(event,{updates:x,payloadSource:u()});}var w=l(new g(),{handleUpdate:function(x,y){if(Object.keys(y).length)this.synchronizeInforms(function(){s.push(x);var z=l({payloadsource:u()},y);this.inform('update-feedback',z);this.inform('update-comment-lists',z);this.inform('update-comments',z);this.inform('update-actions',z);(y.profiles||[]).forEach(function(aa){j.set(aa.id,aa);});if(y.servertime)i.restart(y.servertime);}.bind(this));},didUpdateFeedback:function(x){o[x]=true;t();},didUpdateComment:function(x){p[x]=true;t();},didUpdateFeedbackID:function(x,y){q[x]=y;t();},didUpdateInstanceState:function(x,y){if(!r[x])r[x]={};r[x][y]=true;t();},synchronizeInforms:function(x){n++;try{x();}catch(y){throw y;}finally{n--;t();}}});e.exports=w;});
__d("ImmutableObject",["keyMirror","merge","mergeInto","mergeHelpers","throwIf"],function(a,b,c,d,e,f){var g=b('keyMirror'),h=b('merge'),i=b('mergeInto'),j=b('mergeHelpers'),k=b('throwIf'),l=j.checkMergeObjectArgs,m=j.isTerminal,n,o;n=g({INVALID_MAP_SET_ARG:null});o=function(q){i(this,q);};o.set=function(q,r){k(!(q instanceof o),n.INVALID_MAP_SET_ARG);var s=new o(q);i(s,r);return s;};o.setField=function(q,r,s){var t={};t[r]=s;return o.set(q,t);};o.setDeep=function(q,r){k(!(q instanceof o),n.INVALID_MAP_SET_ARG);return p(q,r);};function p(q,r){l(q,r);var s={},t=Object.keys(q);for(var u=0;u<t.length;u++){var v=t[u];if(!r.hasOwnProperty(v)){s[v]=q[v];}else if(m(q[v])||m(r[v])){s[v]=r[v];}else s[v]=p(q[v],r[v]);}var w=Object.keys(r);for(u=0;u<w.length;u++){var x=w[u];if(q.hasOwnProperty(x))continue;s[x]=r[x];}return (q instanceof o||r instanceof o)?new o(s):s;}e.exports=o;});
__d("UFIClientIDs",["randomInt"],function(a,b,c,d,e,f){var g=b('randomInt'),h={},i={getNewClientID:function(){var j=Date.now(),k=j+':'+(g(0,4294967295)+1);h[k]=true;return k;},isExistingClientID:function(j){return !!h[j];}};e.exports=i;});
__d("UFIFeedbackTargets",["copyProperties","KeyedCallbackManager","UFICentralUpdates","UFIClientIDs","UFIConstants"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('KeyedCallbackManager'),i=b('UFICentralUpdates'),j=b('UFIClientIDs'),k=b('UFIConstants'),l=new h();function m(s){var t={};s.forEach(function(u){var v=g({},u);delete v.commentlist;delete v.commentcount;t[u.entidentifier]=v;i.didUpdateFeedback(u.entidentifier);});l.addResourcesAndExecute(t);}function n(s){for(var t=0;t<s.length;t++){var u=s[t];switch(u.actiontype){case k.UFIActionType.LIKE_ACTION:p(u);break;}}}function o(s){for(var t=0;t<s.length;t++){var u=s[t];if(u.orig_ftentidentifier)q(u.orig_ftentidentifier,u.ftentidentifier);}}function p(s){if(s.orig_entidentifier)q(s.orig_entidentifier,s.entidentifier);var t=l.getResource(s.entidentifier);if(t){s.hasviewerliked=!!s.hasviewerliked;if(s.clientid&&j.isExistingClientID(s.clientid)&&s.hasviewerliked!=t.hasviewerliked)return;t.likecount=s.likecount||0;t.likesentences=s.likesentences;if(s.actorid==t.actorforpost){t.hasviewerliked=s.hasviewerliked;}else if(s.hasviewerliked!=t.hasviewerliked){t.likesentences={current:s.likesentences.alternate,alternate:s.likesentences.current};if(t.hasviewerliked){t.likecount++;}else t.likecount--;}if(s.actorid!=t.actorforpost)t.likesentences.isunseen=true;m([t]);}}function q(s,t){var u=l.getResource(s);if(u){l.setResource(s,null);u.entidentifier=t;l.setResource(t,u);i.didUpdateFeedbackID(s,t);}}var r={getFeedbackTarget:function(s,t){var u=l.executeOrEnqueue(s,t),v=l.getUnavailableResources(u);if(!v.length)return;}};i.subscribe('update-feedback',function(s,t){var u=t.feedbacktargets;if(u&&u.length)m(u);});i.subscribe('update-actions',function(s,t){if(t.actions&&t.actions.length)n(t.actions);});i.subscribe('update-comments',function(s,t){if(t.comments&&t.comments.length)o(t.comments);});e.exports=r;});
__d("UFIInstanceState",["UFICentralUpdates"],function(a,b,c,d,e,f){var g=b('UFICentralUpdates'),h={};function i(k){if(!h[k])h[k]={};}var j={getKeyForInstance:function(k,l){i(k);return h[k][l];},updateState:function(k,l,m){i(k);h[k][l]=m;g.didUpdateInstanceState(k,l);},updateStateField:function(k,l,m,n){var o=this.getKeyForInstance(k,l)||{};o[m]=n;this.updateState(k,l,o);}};e.exports=j;});
__d("UFIComments",["ImmutableObject","JSLogger","KeyedCallbackManager","MercuryServerDispatcher","UFICentralUpdates","UFIClientIDs","UFIConstants","UFIFeedbackTargets","UFIInstanceState","URI","copyProperties","keyMirror","merge","randomInt","throwIf"],function(a,b,c,d,e,f){var g=b('ImmutableObject'),h=b('JSLogger'),i=b('KeyedCallbackManager'),j=b('MercuryServerDispatcher'),k=b('UFICentralUpdates'),l=b('UFIClientIDs'),m=b('UFIConstants'),n=b('UFIFeedbackTargets'),o=b('UFIInstanceState'),p=b('URI'),q=b('copyProperties'),r=b('keyMirror'),s=b('merge'),t=b('randomInt'),u=b('throwIf'),v=r({INVALID_COMMENT_TYPE:null}),w=h.create('UFIComments'),x={},y={},z={},aa={},ba={},ca='unavailable_comment_key';function da(wa){return wa in ba?ba[wa]:wa;}function ea(wa){if(!y[wa])y[wa]=new i();return y[wa];}function fa(wa,xa){wa.forEach(function(ya){var za=ya.ftentidentifier,ab=ya.parentcommentid||za;n.getFeedbackTarget(za,function(bb){var cb=ya.clientid,db=false,eb=s({},ya);if(cb){delete eb.clientid;db=l.isExistingClientID(cb);if(db&&ba[cb])return;}var fb=m.UFIPayloadSourceType;if((xa===fb.LIVE_SEND)||(xa===fb.USER_ACTION)||(xa===fb.ENDPOINT_ADD_COMMENT)||(xa===fb.ENDPOINT_EDIT_COMMENT))eb.isunseen=true;if(xa===fb.ENDPOINT_COMMENT_FETCH||xa===fb.ENDPOINT_ID_COMMENT_FETCH)eb.fromfetch=true;var gb=ea(ab),hb=gb.getAllResources(),ib={};for(var jb in hb){var kb=hb[jb];ib[kb]=jb;}if(db){if(x[cb].ufiinstanceid)o.updateStateField(x[cb].ufiinstanceid,'locallycomposed',ya.id,true);ba[cb]=ya.id;x[ya.id]=x[cb];delete x[cb];k.didUpdateComment(cb);if(cb in ib){ib[ya.id]=ib[cb];var lb=ib[cb];gb.setResource(lb,ya.id);}}if(!ib[ya.id]){var mb=z[ab]||0;ib[ya.id]=mb;z[ab]=mb+1;gb.setResource(mb,ya.id);}var nb=ib[ya.id],ob=z[ab];eb.replycount=(z[ya.id]||0)-(aa[ya.id]||0);var pb=Math.floor((ob-nb-1)/m.defaultPageSize)*m.defaultPageSize;eb.permalink=p(bb.permalink).addQueryData({comment_id:ya.legacyid,offset:pb,total_comments:ob}).toString();va.setComment(ya.id,new g(eb));k.didUpdateComment(ya.id);k.didUpdateFeedback(za);});});}function ga(wa){for(var xa=0;xa<wa.length;xa++){var ya=wa[xa];switch(ya.actiontype){case m.UFIActionType.COMMENT_LIKE:ja(ya);break;case m.UFIActionType.DELETE_COMMENT:na(ya);break;case m.UFIActionType.LIVE_DELETE_COMMENT:oa(ya);break;case m.UFIActionType.UNDO_DELETE_COMMENT:pa(ya);break;case m.UFIActionType.REMOVE_PREVIEW:qa(ya);break;case m.UFIActionType.COMMENT_SET_SPAM:ra(ya);break;case m.UFIActionType.CONFIRM_COMMENT_REMOVAL:sa(ya);break;case m.UFIActionType.TRANSLATE_COMMENT:ka(ya);break;}}}function ha(wa){for(var xa in wa){var ya=wa[xa],za=ya.range,ab=ya.values;if(!za){w.error('nullrange',{target:xa,commentList:ya});continue;}var bb={};for(var cb=0;cb<za.length;cb++)bb[za.offset+cb]=ab[cb]||ca;ea(xa).addResourcesAndExecute(bb);if(ya.count!==undefined){z[xa]=ya.count;aa[xa]=0;}var db=ya.ftentidentifier||xa;k.didUpdateFeedback(db);}}function ia(wa){wa.forEach(function(xa){z[xa.entidentifier]=xa.commentcount;aa[xa.entidentifier]=0;k.didUpdateFeedback(xa.entidentifier);});}function ja(wa){var xa=va.getComment(wa.commentid);if(xa){var ya={},za=wa.clientid&&l.isExistingClientID(wa.clientid);if(!za){ya.hasviewerliked=wa.viewerliked;ya.likecount=wa.likecount;}ya.likeconfirmhash=t(0,1024);ua(wa.commentid,ya);}}function ka(wa){var xa=wa.commentid,ya=va.getComment(wa.commentid);if(ya)ua(xa,{translatedtext:wa.translatedtext});}function la(wa){var xa={reportLink:wa.reportLink,commenterIsFOF:wa.commenterIsFOF,userIsMinor:wa.userIsMinor};if(wa.undoData)xa.undoData=wa.undoData;return xa;}function ma(wa){if(wa){var xa=va.getComment(wa);if(xa){var ya={replycount:va.getDisplayedCommentCount(wa)};ua(wa,ya);}}}function na(wa){var xa=va.getComment(wa.commentid);if(xa.status!==m.UFIStatus.DELETED){var ya=xa.parentcommentid||xa.ftentidentifier;aa[ya]++;ma(xa.parentcommentid);}ta(xa,m.UFIStatus.DELETED);}function oa(wa){var xa=va.getComment(wa.commentid);if(xa.status!==m.UFIStatus.DELETED)ta(xa,m.UFIStatus.LIVE_DELETED);}function pa(wa){var xa=va.getComment(wa.commentid);if(xa.status===m.UFIStatus.DELETED){var ya=xa.parentcommentid||xa.ftentidentifier;aa[ya]--;ma(xa.parentcommentid);}ta(xa,m.UFIStatus.PENDING_UNDO_DELETE);}function qa(wa){ua(wa.commentid,{attachment:null});}function ra(wa){var xa=va.getComment(wa.commentid),ya=wa.shouldHideAsSpam?m.UFIStatus.SPAM_DISPLAY:null;ta(xa,ya);}function sa(wa){ua(wa.commentid,la(wa));}function ta(wa,xa){ua(wa.id,{priorstatus:wa.status,status:xa});}function ua(wa,xa){var ya=va.getComment(wa)||new g({});va.setComment(wa,g.set(ya,xa));k.didUpdateComment(ya.id);k.didUpdateFeedback(ya.ftentidentifier);}var va={getComments:function(wa){var xa={};for(var ya=0;ya<wa.length;ya++)xa[wa[ya]]=va.getComment(wa[ya]);return xa;},getComment:function(wa){return x[da(wa)];},setComment:function(wa,xa){x[da(wa)]=xa;},getCommentsInRange:function(wa,xa,ya){var za=ea(wa),ab=null;n.getFeedbackTarget(wa,function(bb){var cb=[];for(var db=0;db<xa.length;db++)cb.push(xa.offset+db);ab=za.executeOrEnqueue(cb,function(jb){var kb=[],lb=xa.offset,mb=xa.offset+xa.length-1;for(var nb=0;nb<xa.length;nb++){var ob=bb.isranked?mb-nb:lb+nb;if(jb[ob]!=ca){var pb=this.getComment(jb[ob]);if(pb)kb.push(pb);}}ya(kb);}.bind(this));var eb=za.getUnavailableResources(ab);if(eb.length){za.unsubscribe(ab);var fb=Math.min.apply(Math,eb),gb=Math.max.apply(Math,eb),hb=fb,ib=gb-fb+1;j.trySend('/ajax/ufi/comment_fetch.php',{ft_ent_identifier:bb.entidentifier,source:null,offset:hb,length:ib});}}.bind(this));return ab;},getRepliesInRanges:function(wa,xa,ya){var za={},ab={},bb={},cb=false;n.getFeedbackTarget(wa,function(db){for(var eb in xa){var fb=ea(eb),gb=xa[eb],hb=[];for(var ib=0;ib<gb.length;ib++)hb.push(gb.offset+ib);za[eb]=fb.executeOrEnqueue(hb,function(sb){var tb=[];for(var ub=0;ub<gb.length;ub++){var vb=gb.offset+ub;if(sb[vb]!=ca){var wb=this.getComment(sb[vb]);if(wb)tb.push(wb);}}ab[eb]=tb;}.bind(this));bb[eb]=fb.getUnavailableResources(za[eb]);if(bb[eb].length){cb=true;fb.unsubscribe(za[eb]);}}if(!cb){ya(ab);}else{var jb=[],kb=[],lb=[];for(var mb in bb){var nb=bb[mb];if(nb.length){var ob=Math.min.apply(Math,nb),pb=Math.max.apply(Math,nb),qb=ob,rb=pb-ob+1;jb.push(mb);kb.push(qb);lb.push(rb);}}j.trySend('/ajax/ufi/reply_fetch.php',{ft_ent_identifier:db.entidentifier,parent_comment_ids:jb,source:null,offsets:kb,lengths:lb});}}.bind(this));return za;},getCommentCount:function(wa){return z[wa]||0;},getDeletedCount:function(wa){return aa[wa]||0;},getDisplayedCommentCount:function(wa){return (z[wa]||0)-(aa[wa]||0);}};j.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:j.IMMEDIATE,handler:k.handleUpdate.bind(k,m.UFIPayloadSourceType.ENDPOINT_COMMENT_FETCH)},'/ajax/ufi/reply_fetch.php':{mode:j.IMMEDIATE,handler:k.handleUpdate.bind(k,m.UFIPayloadSourceType.ENDPOINT_COMMENT_FETCH)}});k.subscribe('update-comments',function(wa,xa){if(xa.comments&&xa.comments.length)fa(xa.comments,xa.payloadsource);});k.subscribe('update-actions',function(wa,xa){if(xa.actions&&xa.actions.length)ga(xa.actions);});k.subscribe('update-comment-lists',function(wa,xa){var ya=xa.commentlists;if(ya&&Object.keys(ya).length)ha(ya);});k.subscribe('update-feedback',function(wa,xa){var ya=xa.feedbacktargets;if(ya&&ya.length)ia(ya);});e.exports=va;});
__d("UFITrackingNodes",[],function(a,b,c,d,e,f){var g={types:{USER_NAME:2,LIKE_LINK:5,UNLIKE_LINK:6,USER_MESSAGE:18,SOURCE:21,BLINGBOX:22,VIEW_ALL_COMMENTS:24,COMMENT:25,SMALL_ACTOR_PHOTO:27,ADD_COMMENT_BOX:34,UFI:36},encodeTrackingInfo:function(h,i){var j=String.fromCharCode(h+57);if(i)j+=String.fromCharCode(48+Math.min(i,10)-1);return j;},getTrackingInfo:function(h,i){return '{"tn":"'+g.encodeTrackingInfo(h,i)+'"}';}};e.exports=g;});
__d("UFILikeLink",["ReactDOM","React","UFITrackingNodes","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('React'),i=b('UFITrackingNodes'),j=b('tx'),k=h.createComponent({render:function(){var l=this.props.likeAction?"Like":"Unlike",m=i.getTrackingInfo(this.props.likeAction?i.types.LIKE_LINK:i.types.UNLIKE_LINK),n=this.props.likeAction?"Like this item":"Stop liking this item";return (g.a({className:"UFILikeLink",href:"#",role:"button",'aria-live':"polite",title:n,onClick:this.props.onClick,'data-ft':m,children:l}));}});e.exports=k;});
__d("UFIUserActions",["AsyncResponse","DOM","ImmutableObject","JSLogger","Nectar","UFICentralUpdates","UFIClientIDs","UFIComments","UFIConstants","UFIFeedbackTargets","MercuryServerDispatcher","collectDataAttributes","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('AsyncResponse'),h=b('DOM'),i=b('ImmutableObject'),j=b('JSLogger'),k=b('Nectar'),l=b('UFICentralUpdates'),m=b('UFIClientIDs'),n=b('UFIComments'),o=b('UFIConstants'),p=b('UFIFeedbackTargets'),q=b('MercuryServerDispatcher'),r=b('collectDataAttributes'),s=b('copyProperties'),t=b('tx'),u=j.create('UFIUserActions'),v={BAN:'ban',UNDO_BAN:'undo_ban'},w={changeCommentLike:function(ha,ia,ja){var ka=n.getComment(ha);if(ka.hasviewerliked!=ia){var la=x(ja.target),ma=ia?1:-1,na={commentid:ha,actiontype:o.UFIActionType.COMMENT_LIKE,viewerliked:ia,likecount:ka.likecount+ma};l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{actions:[na]});q.trySend('/ajax/ufi/comment_like.php',s({comment_id:ha,legacy_id:ka.legacyid,like_action:ia,ft_ent_identifier:ka.ftentidentifier,source:ja.source,client_id:m.getNewClientID()},la));}},addComment:function(ha,ia,ja,ka){p.getFeedbackTarget(ha,function(la){var ma=x(ka.target),na=m.getNewClientID();if(!la.actorforpost)return;var oa={ftentidentifier:ha,body:{text:ia},author:la.actorforpost,id:na,islocal:true,ufiinstanceid:ka.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:ka.replyid,timestamp:{time:Date.now(),text:"a few seconds ago"}};l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{comments:[oa]});var pa=null;if(ka.replyid)pa=(n.getComment(ka.replyid)).fbid;q.trySend('/ajax/ufi/add_comment.php',s({ft_ent_identifier:la.entidentifier,comment_text:ja,source:ka.source,client_id:na,reply_fbid:pa,parent_comment_id:ka.replyid,timeline_log_data:ka.timelinelogdata},ma));});},editComment:function(ha,ia,ja,ka){var la=x(ka.target),ma=n.getComment(ha);ma=i.set(ma,{status:o.UFIStatus.PENDING_EDIT,body:{text:ia},timestamp:{time:Date.now(),text:"a few seconds ago",original:ma.timestamp.time},editnux:null,attachment:null});l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{comments:[ma]});q.trySend('/ajax/ufi/edit_comment.php',s({ft_ent_identifier:ma.ftentidentifier,comment_text:ja,source:ka.source,comment_id:ma.id,parent_comment_id:ma.parentcommentid},la));},translateComment:function(ha,ia){q.trySend('/ajax/ufi/translate_comment.php',{ft_ent_identifier:ha.ftentidentifier,comment_ids:[ha.id],source:ia.source});},setHideAsSpam:function(ha,ia,ja){var ka=x(ja.target),la=n.getComment(ha),ma={commentid:ha,actiontype:o.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:ia};l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{actions:[ma]});q.trySend('/ajax/ufi/comment_spam.php',s({comment_id:ha,spam_action:ia,ft_ent_identifier:la.ftentidentifier,source:ja.source},ka));},removeComment:function(ha,ia){var ja=x(ia.target),ka=n.getComment(ha),la={actiontype:o.UFIActionType.DELETE_COMMENT,commentid:ha,oneclick:ia.oneclick};l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{actions:[la]});q.trySend('/ajax/ufi/delete_comment.php',s({comment_id:ka.id,comment_legacyid:ka.legacyid,ft_ent_identifier:ka.ftentidentifier,one_click:ia.oneclick,source:ia.source,client_id:m.getNewClientID(),timeline_log_data:ia.timelinelogdata},ja));},undoRemoveComment:function(ha,ia,ja){var ka=n.getComment(ha);if(!ka.undoData){u.error('noundodata',{comment:ha});return;}var la=x(ja.target),ma={actiontype:o.UFIActionType.UNDO_DELETE_COMMENT,commentid:ha};l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{actions:[ma]});var na=ka.undoData;na.page_admin=ia;var oa=s(la,na);q.trySend('/ajax/ufi/undo_delete_comment.php',oa);},banUser:function(ha,ia,ja,ka){var la=ja?v.BAN:v.UNDO_BAN;q.trySend('/ajax/ufi/ban_user.php',{page_id:ia,commenter_id:ha.author,action:la,comment_id:ha.id,client_side:true});},changeLike:function(ha,ia,ja){p.getFeedbackTarget(ha,function(ka){var la=x(ja.target);if(ka.hasviewerliked!==ia){var ma=ia?1:-1,na={actiontype:o.UFIActionType.LIKE_ACTION,actorid:ka.actorforpost,hasviewerliked:ia,likecount:ka.likecount+ma,entidentifier:ha,likesentences:{current:ka.likesentences.alternate,alternate:ka.likesentences.current}};l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{actions:[na]});q.trySend('/ajax/ufi/like.php',s({like_action:ia,ft_ent_identifier:ha,source:ja.source,client_id:m.getNewClientID()},la));}});},fetchSpamComments:function(ha,ia,ja){q.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ha,comment_ids:ia,parent_comment_id:ja,source:null});},removePreview:function(ha,ia){var ja=x(ia.target),ka={commentid:ha.id,actiontype:o.UFIActionType.REMOVE_PREVIEW};l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{actions:[ka]});q.trySend('/ajax/ufi/remove_preview.php',s({comment_id:ha.id,ft_ent_identifier:ha.ftentidentifier,source:ia.source},ja));}};function x(ha){if(!ha)return {ft:{}};var ia={ft:r(ha,['ft']).ft};k.addModuleData(ia,ha);return ia;}function y(ha){var ia=ha.request.data;g.defaultErrorHandler(ha);var ja=ia.client_id||ia.comment_id,ka=n.getComment(ja),la=(ka.status===o.UFIStatus.PENDING_EDIT)?o.UFIStatus.FAILED_EDIT:o.UFIStatus.FAILED_ADD,ma=ha.error!==1404074;ka=i.setDeep(ka,{status:la,allowretry:ma,body:{mentionstext:ia.comment_text}});l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{comments:[ka]});}function z(ha){var ia=ha.request.data,ja=ia.comment_id,ka=n.getComment(ja);ka=i.set(ka,{status:ka.priorstatus||null,priorstatus:undefined});l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{comments:[ka]});}function aa(ha){var ia=ha.request.data,ja=ia.comment_id,ka=n.getComment(ja);if(ia.like_action===ka.hasviewerliked){var la=ka.hasviewerliked?-1:1,ma={commentid:ja,actiontype:o.UFIActionType.COMMENT_LIKE,viewerliked:!ka.hasviewerliked,likecount:ka.likecount+la};l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{actions:[ma]});}g.defaultErrorHandler(ha);}function ba(ha){var ia=ha.request.data,ja=ia.ft_ent_identifier;p.getFeedbackTarget(ja,function(ka){if(ka.hasviewerliked===ia.like_action){var la=ka.hasviewerliked?-1:1,ma={actiontype:o.UFIActionType.LIKE_ACTION,actorid:ka.actorforpost,hasviewerliked:!ka.hasviewerliked,likecount:ka.likecount+la,entidentifier:ja,likesentences:{current:ka.likesentences.alternate,alternate:ka.likesentences.current}};l.handleUpdate(o.UFIPayloadSourceType.USER_ACTION,{actions:[ma]});}});g.defaultErrorHandler(ha);}var ca=function(ha){return l.handleUpdate.bind(l,ha);},da=o.UFIPayloadSourceType;q.registerEndpoints({'/ajax/ufi/comment_like.php':{mode:q.BATCH_CONDITIONAL,handler:ca(da.ENDPOINT_COMMENT_LIKE),error_handler:aa,batch_if:ea,batch_function:ga},'/ajax/ufi/comment_spam.php':{mode:q.IMMEDIATE,handler:ca(da.ENDPOINT_COMMENT_SPAM),error_handler:z},'/ajax/ufi/add_comment.php':{mode:q.IMMEDIATE,handler:ca(da.ENDPOINT_ADD_COMMENT),error_handler:y},'/ajax/ufi/delete_comment.php':{mode:q.IMMEDIATE,handler:ca(da.ENDPOINT_DELETE_COMMENT),error_handler:z},'/ajax/ufi/undo_delete_comment.php':{mode:q.IMMEDIATE,handler:ca(da.ENDPOINT_UNDO_DELETE_COMMENT),error_handler:z},'/ajax/ufi/ban_user.php':{mode:q.IMMEDIATE,handler:ca(da.ENDPOINT_BAN)},'/ajax/ufi/edit_comment.php':{mode:q.IMMEDIATE,handler:ca(da.ENDPOINT_EDIT_COMMENT),error_handler:y},'/ajax/ufi/like.php':{mode:q.BATCH_CONDITIONAL,handler:ca(da.ENDPOINT_LIKE),error_handler:ba,batch_if:fa,batch_function:ga},'/ajax/ufi/id_comment_fetch.php':{mode:q.IMMEDIATE,handler:ca(da.ENDPOINT_ID_COMMENT_FETCH)},'/ajax/ufi/remove_preview.php':{mode:q.IMMEDIATE,handler:ca(da.ENDPOINT_REMOVE_PREVIEW)},'/ajax/ufi/translate_comment.php':{mode:q.IMMEDIATE,handler:ca(da.ENDPOINT_TRANSLATE_COMMENT)}});function ea(ha,ia){return ha&&ha.ft_ent_identifier==ia.ft_ent_identifier&&ha.comment_id==ia.comment_id;}function fa(ha,ia){return ha&&ha.ft_ent_identifier==ia.ft_ent_identifier;}function ga(ha,ia){return ia;}e.exports=w;});
__d("UFIActionLinkController",["ReactDOM","event-extensions","Arbiter","CSS","DOMQuery","Parent","React","UFIBlingBox","UFICentralUpdates","UFIComments","UFILikeLink","UFIFeedbackTargets","UFITrackingNodes","UFIUserActions","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DOMQuery'),j=b('Parent'),k=b('React'),l=b('UFIBlingBox'),m=b('UFICentralUpdates'),n=b('UFIComments'),o=b('UFILikeLink'),p=b('UFIFeedbackTargets'),q=b('UFITrackingNodes'),r=b('UFIUserActions'),s=b('copyProperties');function t(v,w,x){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var y=i.scry(v,w)[0];if(y){var z=document.createElement('span');y.parentNode.replaceChild(z,y);z.appendChild(y);if(typeof x==="function")x(z);}else var aa=g.subscribe('PhotoSnowlift.DATA_CHANGE',function(){g.unsubscribe(aa);t(v,w,x);},g.SUBSCRIBE_NEW);}var u=function(v,w,x){this._id=w.ftentidentifier;this._source=w.source;this._contextArgs=w;this._ufiRoot=v;this._attemptInitializeBling();if(x.viewercanlike)this._attemptInitializeLike();m.subscribe('feedback-updated',function(y,z){var aa=z.updates;if(this._id in aa)this.render();}.bind(this));m.subscribe('feedback-id-changed',function(y,z){var aa=z.updates;if(this._id in aa)this._id=aa[this._id];}.bind(this));};s(u.prototype,{_attemptInitializeBling:function(){t(this._ufiRoot,'^form .uiBlingBox',function(v){this._blingRoot=v;if(this._dataReady)this._renderBling();}.bind(this));},_attemptInitializeLike:function(){t(this._ufiRoot,'^form .like_link',function(v){this._likeRoot=v;if(this._dataReady)this._renderLike();}.bind(this));},render:function(){this._dataReady=true;this._renderBling();this._renderLike();},_renderBling:function(){if(this._blingRoot)p.getFeedbackTarget(this._id,function(v){var w=function(event){var z=j.byTag(event.target,"form");h.toggleClass(z,"collapsed_comments");h.toggleClass(z,"hidden_add_comment");event.preventDefault();}.bind(this),x=q.getTrackingInfo(q.types.BLINGBOX),y=l({likes:v.likecount,comments:n.getDisplayedCommentCount(this._id),reshares:v.sharecount,permalink:v.permalink,contextArgs:this._contextArgs,onClick:w,'data-ft':x});this._blingBox=k.renderOrUpdateComponent(y,this._blingRoot);}.bind(this));},_renderLike:function(){if(this._likeRoot)p.getFeedbackTarget(this._id,function(v){var w=!v.hasviewerliked,x=function(event){r.changeLike(this._id,w,{source:this._source,target:event.target});event.preventDefault();}.bind(this),y=o({onClick:x,likeAction:w});this._likeLink=k.renderOrUpdateComponent(y,this._likeRoot);}.bind(this));}});e.exports=u;});
__d("MentionsInputUtils",[],function(a,b,c,d,e,f){var g={generateDataFromTextWithEntities:function(h){var i=h.text,j={};(h.ranges||[]).forEach(function(k){var l=k.entities[0];if(!l.external)j[l.id]=i.substr(k.offset,k.length);});return {flattened:i,mention_data:j};}};e.exports=g;});
__d("Layout",["keyMirror"],function(a,b,c,d,e,f){var g=b('keyMirror'),h={small:true,medium:true,large:true,none:true},i={small:true,medium:true,large:true,huge:true},j={none:true,medium:true,light:true,dark:true},k={dark:true,inverted:true,standard:true},l={top:true,middle:true,bottom:true},m={left:true,center:true,right:true},n={horizontal:true,vertical:true},o={spacing:g(h),size:g(i),boldness:g(j),appearance:g(k),direction:g(n),vAlign:g(l),hAlign:g(m)};e.exports=o;});
__d("bindNoArgs",[],function(a,b,c,d,e,f){var g=function(h,i){if(!h)return null;return function(){return h.call(i);};};e.exports=g;});
__d("curryOnly",[],function(a,b,c,d,e,f){var g=function(h,i,j){if(!h)return null;return function(){return h.call(j,i);};};e.exports=g;});
__d("reactKeys",[],function(a,b,c,d,e,f){var g=function(h){var i=[],j;for(j in h)if(h.hasOwnProperty(j))i.push(j);return i;};e.exports=g;});
__d("mergeDeep",["mergeHelpers","mergeDeepInto"],function(a,b,c,d,e,f){var g=b('mergeHelpers'),h=b('mergeDeepInto'),i=g.checkMergeLevel,j=g.checkArrayStrategy,k=g.checkMergeObjectArgs,l=g.isTerminal,m=g.normalizeMergeArg,n=function(o,p,q){var r=m(o),s=m(p);k(r,s);j(q);var t={};h(t,r,q);h(t,s,q);return t;};e.exports=n;});
__d("ReactUtils",["bindNoArgs","curryOnly","keyMirror","keyOf","reactKeys","merge","mergeDeep","mergeDeepInto","mergeHelpers","mergeInto","mixInto","objMapKeyVal"],function(a,b,c,d,e,f){var g=b('bindNoArgs'),h=b('curryOnly'),i=b('keyMirror'),j=b('keyOf'),k=b('reactKeys'),l=b('merge'),m=b('mergeDeep'),n=b('mergeDeepInto'),o=b('mergeHelpers'),p=b('mergeInto'),q=b('mixInto'),r=b('objMapKeyVal');f.bindNoArgs=g;f.curryOnly=h;f.keyMirror=i;f.keyOf=j;f.keys=k;f.merge=l;f.mergeDeep=m;f.mergeInto=p;f.mixInto=q;f.objMapKeyVal=r;});
__d("LeftRight",["ReactDOM","React","ReactErrors","ReactUtils"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('React'),i=b('ReactErrors'),j=b('ReactUtils'),k=j.keyMirror({left:true,right:true,both:true});function l(n){i.throwIf(!n.children||n.children.length<1||n.children.length>2,"LeftRight component must have one or two children.");}var m=h.createComponent({render:function(){l(this.props);var n=this.props.direction||k.both,o=[{clearfix:true},this.props.classSet],p={lfloat:n===k.left||n===k.both},q={rfloat:n===k.right||n===k.both},r=g.div({classSet:p,children:this.props.children[0]}),s=(this.props.children.length<2)?null:g.div({classSet:q,children:this.props.children[1]}),t=(n===k.right&&s)?[s,r]:[r,s],u=g.div({classSet:o,children:t});u.props=j.merge(this.props,u.props);return u;}});m.DIRECTION=k;e.exports=m;});
__d("ImageBlock",["ReactDOM","Layout","LeftRight","React","ReactUtils","ReactErrors","cx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('Layout'),i=b('LeftRight'),j=b('React'),k=b('ReactUtils'),l=b('ReactErrors'),m=b('cx'),n=h.spacing;function o(s){l.throwIf(!s.children||s.children.length>3||s.children.length<1,"ImageBlock requires two or three children.");}function p(s){var t={img:true};t._8o=true;t._8r=s===n.small;t._8s=s===n.medium;t._8t=s===n.large;return t;}function q(s,t,u){s.props.classSet=[p(t),s.props.classSet,u];}var r=j.createComponent({render:function(){o(this.props);var s=this.props.children[0],t=this.props.children[1],u=this.props.children[2],v=this.props.spacing||n.small;q(s,v,this.props.imageClassSet);var w=this.props.contentClassSet||{};w._8m=true;w._8u=v===n.small;if(s.tagName=='IMG'){if(s.props.alt===undefined)s.props.alt='';}else if((s.tagName=='A'||s.tagName=='LINK')&&s.props.tabIndex===undefined&&s.props.title===undefined&&s.props['aria-label']===undefined){s.props.tabIndex='-1';s.props['aria-hidden']='true';}var x;if(!u){x=g.div({classSet:w,children:t});}else x=i({classSet:w,direction:i.DIRECTION.right,children:[t,u]});var y=i({classSet:this.props.classSet,direction:i.DIRECTION.left,children:[s,x]});y.props=k.merge(this.props,y.props);return y;}});e.exports=r;});
__d("ReactLegacyMentionsInput",["ReactDOM","event-extensions","PlaceholderListener","Bootloader","Keys","React"],function(a,b,c,d,e,f){var g=b('ReactDOM');b('event-extensions');b('PlaceholderListener');var h=b('Bootloader'),i=b('Keys'),j=b('React'),k=b('event-extensions').$E,l=j.createComponent({onDomReady:function(m){this.props.initialData&&this._initializeTextarea(m);this.props.autofocus&&this.focus();},hasEnteredText:function(){return !!(this._mentionsInput&&this._mentionsInput.getValue().trim());},_handleKeydown:function(event){var m=event.nativeEvent,n=this.props.onEnterSubmit,o=Event.getKeyCode(m)==i.RETURN&&!k(m).getModifiers().any,p=this._mentionsInput&&this._mentionsInput.getTypeahead().getView().getSelection();if(n&&o&&!p){var q=event.target,r=q.value&&q.value.trim();if(r||this.props.acceptEmptyInput){var s={visibleValue:r,encodedValue:r};if(this._mentionsInput){s.encodedValue=this._mentionsInput.getRawValue().trim();this._mentionsInput.reset({flattened:''});}n(s,event);}event.preventDefault();}},_handleFocus:function(){this.props.onFocus&&this.props.onFocus();this._initializeTextarea(this.refs.root.getDOMNode());},_handleBlur:function(){this.props.onBlur&&this.props.onBlur();},_initializeTextarea:function(m){if(this._mentionsInput||this._bootloadingMentions)return;this._bootloadingMentions=true;h.loadModules(['CompactTypeaheadRenderer','ContextualTypeaheadView','InputSelection','MentionsInput','TextAreaControl','Typeahead','TypeaheadAreaCore','TypeaheadBestName','TypeaheadHoistFriends','TypingDetector'],function(n,o,p,q,r,s,t,u,v,w){var x=this.refs.textarea.getDOMNode();new r(x);if(this.props.onTypingStateChange){var y=new w(x);y.init();y.subscribe('change',this.props.onTypingStateChange);}var z={autoSelect:true,renderer:n},aa=new s(this.props.datasource,{ctor:o,options:z},{ctor:t},this.refs.typeahead.getDOMNode());aa.init([u,v]);this._mentionsInput=new q(m,aa,x,{});this._mentionsInput.init({max:6},this.props.initialData);if(this.props.initialData)p.set(x,x.value.length);this._bootloadingMentions=false;}.bind(this));},focus:function(){try{this.refs.textarea.getDOMNode().focus();}catch(m){}},render:function(){var m={textInput:true,mentionsTextarea:true,uiTextareaAutogrow:true,uiTextareaNoResize:true,UFIAddCommentInput:true,DOMControl_placeholder:true};return (g.div({ref:"root",className:"uiMentionsInput textBoxContainer ReactLegacyMentionsInput",children:[g.div({className:"highlighter",children:g.div({children:g.span({className:"highlighterContent hidden_elem"})})}),g.div({ref:"typeahead",className:"uiTypeahead mentionsTypeahead",children:g.div({className:"wrap",children:[g.input({type:"hidden",autocomplete:"off",className:"hiddenInput"}),g.div({className:"innerWrap",children:g.textarea({ref:"textarea",name:"add_comment_text",classSet:m,title:this.props.placeholder,content:this.props.placeholder,placeholder:this.props.placeholder,onFocus:this._handleFocus.bind(this),onBlur:this._handleBlur.bind(this),onKeyDown:this._handleKeydown.bind(this)})})]})}),g.input({type:"hidden",autocomplete:"off",className:"mentionsHidden",value:""})]}));}});e.exports=l;});
__d("UFIClassSets",["cx"],function(a,b,c,d,e,f){var g=b('cx'),h={img:true,UFIActorImage:true};h._rx=true;var i={UFIRow:true},j={UFIUnseenItem:true};e.exports={ROW:i,ACTOR_IMAGE:h,UNSEEN_ITEM:j};});
__d("UFIAddComment",["ReactDOM","event-extensions","ImageBlock","Keys","React","ReactLegacyMentionsInput","UFIClassSets","UFITrackingNodes","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM');b('event-extensions');var h=b('ImageBlock'),i=b('Keys'),j=b('React'),k=b('ReactLegacyMentionsInput'),l=b('UFIClassSets'),m=b('UFITrackingNodes'),n=b('tx'),o="Write a comment...",p="Write a reply...",q={UFICommentTip:true,fcg:true,fss:true},r={UFITextReplyDimensions:true},s=j.createComponent({getInitialState:function(){return {isCommenting:false};},_onKeyDown:function(event){if(this.props.isEditing&&Event.getKeyCode(event.nativeEvent)===i.ESC)this.props.onCancel();},_blur:function(){if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.updateState({isCommenting:false});},focus:function(){if(this.refs&&this.refs.mentionsinput)this.refs.mentionsinput.focus();},render:function(){var t;if(this.props.contextArgs.entstream){t=this.state.isCommenting;}else t=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting;var u=null;if(this.props.isEditing){u=g.span({classSet:q,children:"Press Esc to cancel."});}else if(this.props.showSendOnEnterTip)u=g.span({classSet:q,children:"Press Enter to post."});var v=m.getTrackingInfo(m.types.ADD_COMMENT_BOX),w=[l.ACTOR_IMAGE,{hidden_elem:!t}],x=g.img({classSet:w,src:this.props.viewerActor.thumbSrc});if(this.props.contextArgs.entstream)x=g.div({classSet:{UFIReplyActorPhotoWrapper:true},children:x});var y=[l.ROW,{UFIAddComment:true,noDisplay:this.props.hide},{UFICommentReply:this.props.replyCommentID}],z={UFIMentionsInputWrap:true},aa=!!this.props.replyCommentID?p:o,ba=this.props.contextArgs.entstream?this._blur.bind(this):null;return (g.li({classSet:y,onKeyDown:this._onKeyDown.bind(this),'data-ft':v,children:h({classSet:z,imageClassSet:{UFIImageBlockImage:true},contentClassSet:{UFIImageBlockContent:true},children:[x,g.div({children:[k({autofocus:this.props.autofocus,initialData:this.props.initialData,placeholder:aa,ref:"mentionsinput",wrapperClassSet:r,datasource:this.props.mentionsDataSource,acceptEmptyInput:this.props.isEditing,onEnterSubmit:this.props.onCommentSubmit,onFocus:this.createStateUpdater({isCommenting:true}),onBlur:ba,onTypingStateChange:this.props.onTypingStateChange}),u]})]})}));}});e.exports=s;});
__d("UFIAddCommentController",["ReactDOM","Arbiter","copyProperties","MentionsInputUtils","Parent","UFIAddComment","React","ShortProfiles","UFICentralUpdates","UFIComments","UFIFeedbackTargets","UFIInstanceState","UFIUserActions"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('copyProperties'),i=b('MentionsInputUtils'),j=b('Parent'),k=b('UFIAddComment'),l=b('React'),m=b('ShortProfiles'),n=b('UFICentralUpdates'),o=b('UFIComments'),p=b('UFIFeedbackTargets'),q=b('UFIInstanceState'),r=b('UFIUserActions');function s(t,u,v,w){this.id=u;this._ufiInstanceID=w.instanceid;this._contextArgs=w;this._replyCommentID=v;if(t){this.root=t;this.render();n.subscribe('instance-updated',function(x,y){var z=y.updates;if(this._ufiInstanceID in z)this.render();}.bind(this));}n.subscribe('feedback-id-changed',function(x,y){var z=y.updates;if(this.id in z)this.id=z[this.id];}.bind(this));}h(s.prototype,{_onCommentSubmit:function(t,event){r.addComment(this.id,t.visibleValue,t.encodedValue,{source:this._contextArgs.source,ufiinstanceid:this._ufiInstanceID,target:event.target,replyid:this._replyCommentID,timelinelogdata:this._contextArgs.timelinelogdata});p.getFeedbackTarget(this.id,function(v){if(v.isranked&&this._replyCommentID===null)q.updateState(this._ufiInstanceID,'scrolloninsert',true);}.bind(this));var u=j.byTag(this.root,'form');if(u)g.inform('ufi/comment',{form:u});return false;},_onTypingStateChange:function(t,u){},renderAddComment:function(t,u,v,w,x){var y=this._contextArgs.logtyping?this._onTypingStateChange.bind(this):null,z=null,aa=q.getKeyForInstance(this._ufiInstanceID,'isediting')&&!this._replyCommentID;return (k({autofocus:x,hide:aa,replyCommentID:this._replyCommentID,viewerActor:t,initialData:z,ref:w,onCommentSubmit:this._onCommentSubmit.bind(this),mentionsDataSource:u,onTypingStateChange:y,showSendOnEnterTip:v,source:this._contextArgs.source,contextArgs:this._contextArgs}));},renderEditComment:function(t,u,v,w,x){var y=o.getComment(u),z=i.generateDataFromTextWithEntities(y.body);return (k({viewerActor:t,initialData:z,onCommentSubmit:w,onCancel:x,mentionsDataSource:v,source:this._contextArgs.source,contextArgs:this._contextArgs,isEditing:true}));},render:function(){if(!this.root)throw new Error('render called on UFIAddCommentController with no root');p.getFeedbackTarget(this.id,function(t){if(t.cancomment&&t.actorforpost)m.get(t.actorforpost,function(u){var v=this.renderAddComment(u,t.mentionsdatasource,t.showsendonentertip);this._addComment=l.renderOrUpdateComponent(v,this.root);}.bind(this));}.bind(this));}});e.exports=s;});
__d("ReactLegacyScrollableArea",["ReactDOM","Bootloader","React","Style"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('Bootloader'),i=b('React'),j=b('Style'),k={uiScrollableArea:true,'native':true},l={uiScrollableAreaWrap:true},m={uiScrollableAreaBody:true},n={uiScrollableAreaContent:true},o=i.createComponent({render:function(){var p={height:this.props.height?this.props.height+'px':'auto'};return (g.div({classSet:k,ref:"root",style:p,children:g.div({classSet:l,children:g.div({classSet:m,ref:"body",children:g.div({classSet:n,children:this.props.children})})})}));},onDomReady:function(){h.loadModules(['ScrollableArea'],this._loadScrollableArea.bind(this));},_loadScrollableArea:function(p){this._area=p.fromNative(this.refs.root.getDOMNode(),{fade:this.props.fade,persistent:this.props.persistent});var q=this.refs.body.getDOMNode();j.set(q,'width',this.props.width+'px');this.props.onScroll&&this._area.subscribe('scroll',this.props.onScroll);}});e.exports=o;});
__d("CloseButton",["ReactDOM","Layout","React","ReactUtils","$"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('Layout'),i=b('React'),j=b('ReactUtils'),k=b('$'),l=i.createComponent({render:function(){var m=this.props,n=m.size||h.size.medium,o=m.appearance||h.appearance.normal,p=n===h.size.small,q=n===h.size.huge,r=o===h.appearance.dark,s=o===h.appearance.inverted,t={uiCloseButton:true,uiCloseButtonSmall:p,uiCloseButtonHuge:q,uiCloseButtonSmallDark:p&&r,uiCloseButtonSmallInverted:p&&s,uiCloseButtonDark:!p&&r,uiCloseButtonInverted:!p&&s},u=[t,m.classSet],v=(g.a({href:"#",role:"button",'aria-label':m.tooltip,'data-hover':m.tooltip&&'tooltip','data-tooltip-alignh':m.tooltip&&'center',classSet:u}));v.props=j.merge(m,v.props);return v;}});e.exports=l;});
__d("Link",["ReactDOM","React","UntrustedLink","$","mergeInto"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('React'),i=b('UntrustedLink'),j=b('$'),k=b('mergeInto'),l=h.createComponent({_installLinkshimOnMouseDown:function(event){var m=this.props.href;if(m.shimhash)i.bootstrap(j(this._rootDomId),m.shimhash);this.props.onMouseDown&&this.props.onMouseDown(event);},render:function(){var m=this.props.href,n=g.a({});k(n.props,this.props);if(m){n.props.href=m.url;var o=!!m.shimhash;if(o){n.props.rel=n.props.rel?(n.props.rel+' nofollow'):'nofollow';n.props.onMouseDown=this._installLinkshimOnMouseDown.bind(this);}}return n;}});e.exports=l;});
__d("HovercardLinkInterpolator",["ReactDOM","HovercardLink","Link"],function(a,b,c,d,e,f){var g=b('HovercardLink'),h=b('Link');function i(j,k,l){var m=k.entities[0],n=l||(m.external?'_blank':null),o=h({href:m,content:j,target:n});if(!m.external)o.props['data-hovercard']=g.constructEndpoint(m).toString();return o;}e.exports=i;});
__d("LinkButton",["ReactDOM"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=function(i){var j=i.name&&i.value?i.name+'['+encodeURIComponent(i.value)+']':null;return (g.label({classSet:{uiLinkButton:true,uiLinkButtonSubtle:i.subtle,async_throbber:i.showSaving},children:g.input({type:i.inputType||'button',name:j,value:i.label,classSet:{stat_elem:i.showSaving}})}));};e.exports=h;});
__d("ProfileBrowserLink",["URI"],function(a,b,c,d,e,f){var g=b('URI'),h='/ajax/browser/dialog/',i='/browse/',j=function(l,m,n){return new g(l+m).setQueryData(n);},k={constructPageURI:function(l,m){return j(i,l,m);},constructDialogURI:function(l,m){return j(h,l,m);}};e.exports=k;});
__d("ProfileBrowserTypes",[],function(a,b,c,d,e,f){var g={LIKES:'likes',GROUP_MESSAGE_VIEWERS:'group_message_viewers',MUTUAL_FRIENDS:'mutual_friends'};e.exports=g;});
__d("Timestamp",["ReactDOM","event-extensions","LiveTimer","React"],function(a,b,c,d,e,f){var g=b('ReactDOM');b('event-extensions');var h=b('LiveTimer'),i=b('React'),j=i.createComponent({render:function(){var k=h.renderRelativeTimeToServer(this.props.time),l=k.text;if(!l)l=this.props.text;var m={livetimestamp:true};if(this.props.className)m[this.props.className]=true;return (g.abbr({classSet:m,title:this.props.verbose,'data-utime':this.props.time,content:l}));}});e.exports=j;});
__d("ReactTextWithEmoticons",["ReactDOM","Emoji","Emote","React"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('Emoji'),i=b('Emote'),j=b('React'),k=j.createComponent({render:function(){if(!this.props.renderEmoticons&&!this.props.renderEmoji)return g.span({content:this.props.text});var l;if(this.props.renderEmoticons&&this.props.renderEmoji){l=h.htmlEmoji(this.props.text,i.htmlEmoteWithoutFBID);}else if(this.props.renderEmoticons){l=i.htmlEmoteWithoutFBID(this.props.text);}else l=h.htmlEmoji(this.props.text);return g.span({dangerouslySetInnerHtml:{__html:l}});}});e.exports=k;});
__d("ReactTextWithEntities",["ReactDOM","Link","React","ReactTextWithEmoticons"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('Link'),i=b('React'),j=b('ReactTextWithEmoticons');function k(q){return (q).replace(/<3\b|&hearts;/g,'\u2665');}function l(q,r){return (h({href:r.entities[0],children:[q]}));}function m(q,r){return q.offset-r.offset;}function n(q){return !!q;}var o=/(\r\n|[\r\n])/,p=i.createComponent({_formatStandardText:function(q){var r=q.split(o),s=[];for(var t=0;t<r.length;t++){var u=r[t];if(u)if(o.test(u)){s.push(g.br({}));}else if(this.props.renderEmoticons||this.props.renderEmoji){s.push(j({text:u,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}));}else s.push(k(u));}return s;},render:function(){var q=0,r=this.props.ranges,s=this.props.aggregatedRanges,t=this.props.text,u=null;if(r){u=s?r.concat(s):r.slice();}else if(s)u=s.slice();if(u)u.sort(m);var v=[],w=u?u.length:0;for(var x=0,y=w;x<y;x++){var z=u[x];if(z.offset<q)continue;if(z.offset>q)v=v.concat(this._formatStandardText(t.substring(q,z.offset)));var aa=t.substr(z.offset,z.length);v=v.concat([this.props.interpolator?this.props.interpolator(aa,z):l(aa,z)]);q=z.offset+z.length;}if(t.length>q)v=v.concat(this._formatStandardText(t.substr(q)));return g.span({classSet:this.props.classSet,children:v});}});e.exports=p;});
__d("SeeMore",["ReactDOM","React","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('React'),i=b('tx'),j="...",k="See More",l={SeeMoreLink:true,fss:true},m=h.createComponent({getInitialState:function(){return {isCollapsed:true};},render:function(){var n=this.state.isCollapsed,o=!n?null:g.span({content:j}),p=this.props.children[0],q=n?null:g.span({children:this.props.children[1]}),r=!n?null:g.a({classSet:l,onClick:this.createStateUpdater({isCollapsed:false}),content:k,href:"#",role:"button"});return (g.span({classSet:this.props.classSet,children:[p,o,r,q]}));}});e.exports=m;});
__d("TruncatedTextWithEntities",["ReactDOM","React","ReactTextWithEntities","SeeMore"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('React'),i=b('ReactTextWithEntities'),j=b('SeeMore');function k(o,p){var q=o.offset+o.length;return p>o.offset&&p<q;}function l(o,p){for(var q=0;q<o.length;q++){var r=o[q];if(k(r,p))return r.offset;}return p;}var m=function(o,p,q){var r=[],s=[],t=l(p,q);for(var u=0;u<p.length;u++){var v=p[u];if(v.offset<t){r.push(v);}else s.push({offset:v.offset-t,length:v.length,entities:v.entities});}return {first:{ranges:r,text:o.substr(0,t)},second:{ranges:s,text:o.substr(t)}};},n=h.createComponent({render:function(){var o=this.props.maxLines,p=this.props.maxLength,q=this.props.truncationPercent||.6,r=Math.floor(q*p),s=this.props.text||'',t=this.props.ranges||[],u=s.split('\n'),v=u.length-1,w=p&&s.length>p,x=o&&v>o;if(x)r=Math.min(u.slice(0,o).join('\n').length,r);if(w||x){var y=m(s,t,r);return (g.span({'data-ft':this.props['data-ft'],dir:this.props.dir,children:j({classSet:this.props.classSet,children:[i({interpolator:this.props.interpolator,ranges:y.first.ranges,text:y.first.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}),i({interpolator:this.props.interpolator,ranges:y.second.ranges,text:y.second.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji})]})}));}else return (g.span({'data-ft':this.props['data-ft'],dir:this.props.dir,children:i({classSet:this.props.classSet,interpolator:this.props.interpolator,ranges:t,text:s,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji})}));}});e.exports=n;});
__d("UFIReplyLink",["ReactDOM","React","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('React'),i=b('tx'),j=h.createComponent({render:function(){return (g.a({href:"#",onClick:this.props.onClick,children:"Reply"}));}});e.exports=j;});
__d("UFISpamCount",["UFISpamCountImpl"],function(a,b,c,d,e,f){e.exports=c('UFISpamCountImpl').module||{enabled:false};});
__d("UFIComment",["ReactDOM","function-extensions","Bootloader","CloseButton","Env","HovercardLink","HovercardLinkInterpolator","ImageBlock","Input","Layout","LinkButton","ProfileBrowserLink","ProfileBrowserTypes","React","ReactUtils","Timestamp","TruncatedTextWithEntities","UFIClassSets","UFIConstants","UFIInstanceState","UFIReplyLink","UFISpamCount","UFITrackingNodes","URI","tx","UFIConfig"],function(a,b,c,d,e,f){var g=b('ReactDOM');b('function-extensions');var h=b('Bootloader'),i=b('CloseButton'),j=b('Env'),k=b('HovercardLink'),l=b('HovercardLinkInterpolator'),m=b('ImageBlock'),n=b('Input'),o=b('Layout'),p=b('LinkButton'),q=b('ProfileBrowserLink'),r=b('ProfileBrowserTypes'),s=b('React'),t=b('ReactUtils'),u=b('Timestamp'),v=b('TruncatedTextWithEntities'),w=b('UFIClassSets'),x=b('UFIConstants'),y=b('UFIInstanceState'),z=b('UFIReplyLink'),aa=b('UFISpamCount'),ba=x.UFIStatus,ca=b('UFITrackingNodes'),da=b('URI'),ea=b('tx'),fa=c('UFIConfig'),ga=' \u00b7 ',ha={UFICommentBody:true},ia={UFICommentActorName:true},ja={UFICommentNotSpamLink:true},ka=t.keyMirror({edit:true,hide:true,remove:true}),la={UFICommentActions:true,fsm:true,fwn:true,fcg:true},ma={UFIFailureMessage:true},na={UFIFailureMessageIcon:true},oa={UFITranslateLink:true},pa={UFITranslatedText:true},qa={UFICommentLikeButton:true},ra={UFICommentLikeIcon:true},sa={UFICommentReplyButton:true},ta={UFICommentReplyIcon:true},ua={UFICommentBlingBox:true},va={uiLinkSubtle:true},wa={stat_elem:true},xa={pls:true},ya={fcg:true},za=27,ab=null,bb=function(kb,lb){var mb=new da('/ajax/like/tooltip.php').setQueryData({comment_fbid:kb.fbid,comment_from:kb.author,cache_buster:kb.likeconfirmhash||0});if(lb)mb.addQueryData({viewas:lb});return mb;},cb=function(kb){var lb=kb.status;return lb===ba.FAILED_ADD||lb===ba.FAILED_EDIT;};function db(kb){return kb.commenterIsFOF!==undefined&&kb.userIsMinor!==undefined&&kb.reportLink!==undefined;}var eb=s.createComponent({render:function(){var kb=this.props.comment,lb=kb.likecount||0,mb=r.LIKES,nb={id:kb.fbid},ob=bb(this.props.comment,this.props.viewas),pb=g.i({classSet:ra}),qb=g.span({content:lb});return (g.a({classSet:qa,href:"#",role:"button",rel:"dialog",'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':ob.toString(),ajaxify:q.constructDialogURI(mb,nb).toString(),href:q.constructPageURI(mb,nb).toString(),children:[pb,qb]}));}}),fb=s.createComponent({render:function(){var kb=this.props.comment,lb=this.props.viewas,mb=kb.likecount||0,nb=kb.replycount||0,ob=this.props.onToggleReplies,pb=this.props.showReplies,qb,rb;if(mb>0){var sb=bb(kb,lb),tb=q.constructDialogURI(r.LIKES,{id:kb.fbid}).toString(),ub=q.constructPageURI(r.LIKES,{id:kb.fbid}).toString();qb=g.a({classSet:{UFICommentBlingItem:true},role:"button",rel:"dialog",'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':sb.toString(),ajaxify:tb,href:ub,children:[g.i({classSet:ra}),g.span({content:mb})]});}if(nb>0){var vb=pb?"Hide Replies":"Show Replies";rb=g.a({classSet:{UFICommentBlingItem:true},'aria-label':vb,'data-hover':"tooltip",'data-tooltip-alignh':"center",onClick:ob,href:"#",role:"button",children:[g.i({classSet:ta}),g.span({content:nb})]});}return (g.div({classSet:ua,children:[qb,rb]}));}}),gb=s.createComponent({render:function(){var kb=this.props,lb=kb.comment,mb=kb.feedback,nb=kb.markedAsSpamHere,ob=lb.status===ba.SPAM_DISPLAY,pb=this.props.showReplyLink,qb=this.props.isReply,rb,sb,tb,ub,vb,wb,xb,yb=!lb.islocal&&lb.status!==ba.LIVE_DELETED;if(yb){if(ob&&!nb){if(kb.viewerCanMarkNotSpam)rb=g.a({onClick:kb.onMarkAsNotSpam,classSet:ja,content:"Not Spam",href:"#",role:"button"});}else{if(mb.viewercanlike){var zb=ca.getTrackingInfo(lb.hasviewerliked?ca.types.UNLIKE_LINK:ca.types.LIKE_LINK),ac=lb.hasviewerliked?"Unlike this comment":"Like this comment";sb=g.a({href:"#",role:"button",onClick:kb.onCommentLikeToggle,'data-ft':zb,title:ac,content:lb.hasviewerliked?"Unlike":"Like"});}if(mb.isthreaded&&mb.cancomment&&pb)wb=z({comment:lb,onClick:kb.onCommentReply,contextArgs:kb.contextArgs});if(mb.isthreaded&&!qb&&(lb.likecount>0||lb.replycount>0)){ub=fb({comment:lb,onToggleReplies:this.props.onBlingBoxClick,showReplies:this.props.showReplies});}else if(lb.likecount)tb=eb({comment:lb,viewas:this.props.viewas,contextArgs:this.props.contextArgs});if(lb.spamcount&&aa.enabled)vb=aa({count:lb.spamcount});}if(lb.attachment&&lb.canremove)xb=g.a({onClick:kb.onPreviewRemove,content:"Remove Preview",href:"#",role:"button"});}var bc=hb({comment:lb,onRetrySubmit:kb.onRetrySubmit,showPermalink:kb.showPermalink}),cc;if(kb.contextArgs.entstream){cc=[bc,sb,tb,wb,ub,vb,rb,xb];}else if(mb.isthreaded){cc=[sb,wb,rb,xb,tb,vb,ub,bc];}else cc=[bc,sb,tb,vb,wb,rb,xb];var dc=[];for(var ec=0;ec<cc.length;ec++)if(cc[ec]){dc.push(ga);dc.push(cc[ec]);}dc.shift();return (g.div({classSet:la,children:dc}));}}),hb=s.createComponent({render:function(){var kb=this.props.comment,lb=this.props.onRetrySubmit,mb,nb;if(cb(kb)){mb=[g.span({classSet:ma,children:[g.i({classSet:na}),"Unable to post comment."]}),kb.allowRetry&&lb?[' ',g.a({onClick:lb,href:"#",role:"button",children:"Try Again"})]:null];}else{var ob=this.props.showPermalink?kb.permalink:null,pb=ca.getTrackingInfo(ca.types.SOURCE),qb=g.a({classSet:va,href:ob,'data-ft':pb,children:u({time:kb.timestamp.time,text:kb.timestamp.text,verbose:kb.timestamp.verbose})}),rb;switch(kb.source){case x.UFISourceType.MOBILE:rb=g.a({classSet:va,href:new da('/mobile/').setSubdomain('www').toString(),content:"mobile"});break;case x.UFISourceType.SMS:rb=g.a({classSet:va,href:new da('/mobile/?v=texts').setSubdomain('www').toString(),content:"text message"});break;case x.UFISourceType.EMAIL:rb=p({subtle:true,label:"email",inputType:"submit",name:"email_explain",value:true,classSet:wa});break;}nb=rb?ea._("{time} via {source}",{time:qb,source:rb}):qb;}var sb=null;if(kb.timestamp.original){var tb=new da('/ajax/edits/browser/comment').addQueryData({comment_token:kb.id}).toString();sb=[ga,g.a({ref:"EditLink",href:"#",role:"button",rel:"dialog",className:"uiLinkSubtle",ajaxify:tb,'data-hover':"tooltip",title:"Show edit history",content:"Edited"})];}return (g.span({children:[nb,mb,sb]}));},propTrigger:function(kb){var lb=this.props.comment,mb=kb.comment;if(!lb.editnux&&!!mb.editnux)h.loadModules(['ContextualDialogX'],function(nb){var ob=new nb();ob.init(mb.editnux).setContext(this.refs.EditLink.getDOMNode()).setWidth(300).setPosition('below').show();}.bind(this));}}),ib=s.createComponent({render:function(){var kb=this.props.topMutualFriend,lb=this.props.otherMutualCount,mb=this.props.commentAuthor,nb=k.constructEndpoint(kb).toString(),ob=g.a({href:kb.uri,content:kb.name,'data-hovercard':nb}),pb=mb.name.length+kb.name.length,qb;if(lb===0){qb=ea._("Friends with {name}",{name:ob});}else if(pb<za){var rb;if(lb==1){rb="1 other";}else rb=ea._("{count} others",{count:lb});qb=ea._("Friends with {name} and {others}",{name:ob,others:this.getOthersLink(rb,mb,kb)});}else{var sb=ea._("{count} mutual friends",{count:lb+1});qb=this.getOthersLink(sb,mb);}return (g.span({classSet:{UFICommentSocialContext:true},children:[ga,qb]}));},getOthersLink:function(kb,lb,mb){var nb=r.MUTUAL_FRIENDS,ob={uid:lb.id},pb=new da('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:lb.id});if(mb)pb.addQueryData({exclude_id:mb.id});var qb=q.constructDialogURI(nb,ob).toString();return (g.a({rel:"dialog",'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':pb.toString(),ajaxify:qb,href:q.constructPageURI(nb,ob).toString(),children:kb}));}}),jb=s.createComponent({getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,oneClickRemovedHere:false,isInlinePageDeleted:false,isInlineBanned:false};},_onHideAsSpam:function(event){this.props.onHideAsSpam(event);this.updateState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.props.onMarkAsNotSpam(event);this.updateState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.props.onOneClickRemove(event);this.updateState({isInlinePageDeleted:true});},_onUndoDeleteSpam:function(event){this.props.onUndoOneClickRemove(event);this.updateState({isInlinePageDeleted:false});},_onInlineBan:function(event){this.props.onInlineBan(event);this.updateState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.props.onUndoInlineBan(event);this.updateState({isInlineBanned:false});},_onOneClickRemove:function(event){this.props.onOneClickRemove(event);this.updateState({oneClickRemovedHere:true});},_onUndoOneClickRemove:function(event){this.props.onUndoOneClickRemove(event);this.updateState({oneClickRemovedHere:false});},_onAction:function(event,kb){if(kb===ka.remove){this.props.onRemove(event);}else if(kb===ka.edit){this.props.onEdit(event);}else if(kb===ka.hide)this._onHideAsSpam(event);},_createRemoveReportMenu:function(event){if(this._removeReportMenu)return;var kb=[{label:"Delete Comment...",value:ka.remove},{label:"Hide Comment",value:ka.hide}];h.loadModules(['UFILegacyUtils'],function(lb){this._removeReportMenu=lb.createCommentMenu(event.target,kb,this._onAction.bind(this,event));}.bind(this));},_createEditDeleteMenu:function(event){if(this._editDeleteMenu)return;var kb=[{label:"Edit...",value:ka.edit},{label:"Delete...",value:ka.remove}];h.loadModules(['UFILegacyUtils'],function(lb){this._editDeleteMenu=lb.createCommentMenu(event.target,kb,this._onAction.bind(this,event));}.bind(this));},_renderCloseButton:function(){var kb=this.props.comment,lb=this.props.feedback,mb=null,nb=null,ob=false;if(kb.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor){if(kb.canedit){nb="Edit or Delete";mb=this._createEditDeleteMenu.bind(this);ob=true;}else{nb="Remove";mb=this.props.onRemove;}}else if(lb.canremoveall)if(this.props.showRemoveReportMenu){nb="Remove or Report";mb=this._createRemoveReportMenu.bind(this);}else{nb="Remove";mb=this._onOneClickRemove.bind(this);}}else if(kb.canreport){nb="Hide as Spam";mb=this._onHideAsSpam.bind(this);}var pb={UFICommentCloseButton:true,UFIEditButton:ob,hdn:mb===null};return (i({onClick:mb,tooltip:nb,classSet:pb}));},onDomReady:function(kb){var lb=this.props.comment.ufiinstanceid,mb=y.getKeyForInstance(lb,'scrolloninsert');if(this.state.isHighlighting||mb){h.loadModules(['UFIScrollHighlight'],function(ob){ob.actOn.curry(kb).defer();});this.updateState({isHighlighting:false});}var nb=y.getKeyForInstance(lb,'autofocus');if(nb){n.focus(this.refs.AuthorName.getDOMNode());y.updateState(lb,'autofocus',false);}},needsRedraw:function(kb){return (kb.comment!==this.props.comment||kb.showReplyLink!==this.props.showReplyLink||kb.showReplies!==this.props.showReplies);},render:function(){var kb=this.props.comment,lb=this.props.feedback,mb=kb.status===ba.DELETED,nb=kb.status===ba.LIVE_DELETED,ob=kb.status===ba.SPAM_DISPLAY,pb=kb.status===ba.PENDING_UNDO_DELETE,qb=this.state.markedAsSpamHere,rb=this.state.oneClickRemovedHere,sb=this.state.isInlinePageDeleted,tb=this.props.hideAsSpamForPageAdmin,ub=this.state.isInlineBanned,vb=this.props.isReply,wb=db(kb),xb=!kb.status&&(kb.isunseen||kb.islocal);if(!kb.status&&lb.lastseentime){var yb=kb.timestamp.original||kb.timestamp.time;xb=xb||yb>lb.lastseentime;}var zb=this.props.contextArgs.markedcomment;if(zb&&zb==kb.legacyid)xb=true;var ac=null;if(wb)if(ab){var bc,cc=null;if(tb){ac=ub?this._onUndoInlineBan.bind(this):this._onInlineBan.bind(this);if(sb){cc=this._onUndoDeleteSpam.bind(this);var dc=g.a({href:"#",content:"Undo",onClick:cc});bc=ea._("You've deleted this comment so no one can see it. {undo}.",{undo:dc});}else if(qb)bc=this.getPageAdminNotice();}else if(qb){bc="This comment has been hidden as spam.";cc=this._onMarkAsNotSpam.bind(this);}else if(rb){bc="This comment has been removed.";cc=this._onUndoOneClickRemove.bind(this);}if(bc)return (g.li({classSet:w.ROW,children:ab({notice:bc,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:cc,onBanAction:ac,isInlineBanned:ub,hideAsSpamForPageAdmin:tb})}));}else h.loadModules(['UFICommentRemovalControls'],function(fc){ab=fc;this.updateState.bind(this,{}).defer();}.bind(this));var ec=[w.ROW,{UFIComment:true,UFICommentFailed:cb(kb),UFITranslucentComment:mb||nb||ob||pb,highlightComment:this.state.isHighlighting,noDisplay:mb&&!rb,UFICommentReply:vb,UFILastComment:this.props.isLast}];if(xb)ec.push(w.UNSEEN_ITEM);return (g.li({classSet:ec,'data-ft':this.props['data-ft'],children:this.renderComment()}));},getPageAdminNotice:function(){var kb=g.a({href:"#",role:"button",content:"Undo this",onClick:this._onMarkAsNotSpam.bind(this)}),lb=g.a({href:"#",role:"button",content:"delete this comment",onClick:this._onDeleteSpam.bind(this)}),mb=ea._("You've hidden this comment so only the person who wrote it and their friends can see it. {undoThis} or {deleteThisComment}.",{undoThis:kb,deleteThisComment:lb});return mb;},renderComment:function(){var kb=this.props,lb=kb.comment,mb=kb.feedback,nb=kb.authorProfiles[lb.author],ob=lb.status===ba.SPAM_DISPLAY,pb=lb.status===ba.LIVE_DELETED,qb=!(ob||pb),rb=mb.canremoveall||lb.hiddenbyviewer,sb=null,tb=null;if(!kb.isLocallyComposed&&!this.state.wasHighlighted&&!lb.fromfetch){tb=x.commentTruncationLength;sb=x.commentTruncationMaxLines;}var ub;if(lb.attachment)ub=g.div({isStatic:true,dangerouslySetInnerHtml:lb.attachment.markup});var vb=ca.getTrackingInfo(ca.types.SMALL_ACTOR_PHOTO),wb=ca.getTrackingInfo(ca.types.USER_NAME),xb=ca.getTrackingInfo(ca.types.USER_MESSAGE),yb={'right-aligned-text':lb.body.isrtl&&!j.rtl,'left-aligned-text':!lb.body.isrtl&&j.rtl,UFICommentContent:true},zb,ac=!lb.body.isrtl,bc=!j.rtl;if(ac!==bc)zb=ac?'ltr':'rtl';var cc=null,dc=null;if(lb.istranslatable&&(lb.translatedtext===undefined))cc=g.a({href:"#",role:"button",title:"Translate this comment",classSet:oa,onClick:kb.onCommentTranslate,content:"See Translation"});if(lb.translatedtext){var ec=new da('http://bing.com/translator').addQueryData({text:lb.body.text});dc=g.span({classSet:pa,children:[lb.translatedtext,g.span({classSet:xa,children:["(",g.a({href:ec.toString(),classSet:ya,content:"Translated by Bing"}),")"]})]});}var fc=k.constructEndpoint(nb).toString(),gc=g.a({ref:"AuthorName",classSet:ia,href:nb.uri,content:nb.name,'data-hovercard':fc,'data-ft':wb}),hc=function(mc,nc){return l(mc,nc,'_blank');},ic=v({classSet:ha,interpolator:hc,ranges:lb.body.ranges,text:lb.body.text,truncationPercent:x.commentTruncationPercent,maxLength:tb,maxLines:sb,renderEmoticons:fa.renderEmoticons,renderEmoji:fa.renderEmoji,'data-ft':xb,dir:lb.body.dir}),jc;if(lb.socialcontext){var kc=lb.socialcontext,lc=ib({topMutualFriend:kb.authorProfiles[kc.topmutualid],otherMutualCount:kc.othermutualcount,commentAuthor:nb});jc=[gc,lc,g.div({children:ic})];}else jc=[gc,' ',ic];return (m({spacing:o.spacing.medium,imageClassSet:{UFIImageBlockImage:true},contentClassSet:{UFIImageBlockContent:true},children:[g.a({href:nb.uri,'data-hovercard':fc,'data-ft':vb,children:g.img({src:nb.thumbSrc,classSet:w.ACTOR_IMAGE,alt:""})}),g.div({children:[g.div({classSet:yb,dir:zb,children:[jc,cc,dc,ub]}),gb({comment:lb,feedback:mb,onBlingBoxClick:kb.onBlingBoxClick,onCommentLikeToggle:kb.onCommentLikeToggle,onCommentReply:kb.onCommentReply,onPreviewRemove:kb.onPreviewRemove,onRetrySubmit:kb.onRetrySubmit,onMarkAsNotSpam:this._onMarkAsNotSpam.bind(this),viewerCanMarkNotSpam:rb,viewas:kb.contextArgs.viewas,isReply:kb.isReply,showPermalink:kb.showPermalink,showReplyLink:kb.showReplyLink,showReplies:kb.showReplies,contextArgs:kb.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere})]}),qb?this._renderCloseButton():null]}));}});e.exports=jb;});
__d("UFIContainer",["ReactDOM","React","UFITrackingNodes"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('React'),i=b('UFITrackingNodes'),j=h.createComponent({render:function(){var k=null;if(this.props.hasNub)k=g.li({classSet:{UFIArrow:true},children:g.i({})});return (g.ul({classSet:{UFIList:true},'data-ft':i.getTrackingInfo(i.types.UFI),children:[k,this.props.children]}));}});e.exports=j;});
__d("UFILikeSentenceText",["ReactDOM","HovercardLinkInterpolator","ProfileBrowserLink","ProfileBrowserTypes","React","ReactTextWithEntities","URI"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('HovercardLinkInterpolator'),i=b('ProfileBrowserLink'),j=b('ProfileBrowserTypes'),k=b('React'),l=b('ReactTextWithEntities'),m=b('URI');function n(p,q,r,s){if(s.count!=null){var t=j.LIKES,u={id:p.targetfbid},v=[];for(var w=0;w<q.length;w++)if(!q[w].count)v.push(q[w].entities[0].id);var x=new m('/ajax/like/tooltip.php').setQueryData({comment_fbid:p.targetfbid,comment_from:p.actorforpost,seen_user_fbids:v.length?v:true});return (g.a({rel:"dialog",ajaxify:i.constructDialogURI(t,u).toString(),href:i.constructPageURI(t,u).toString(),'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':x.toString(),children:r}));}else return h(r,s);}var o=k.createComponent({render:function(){var p=this.props.feedback,q=this.props.likeSentenceData,r=n.bind(null,p,q.ranges);return (l({interpolator:r,ranges:q.ranges,aggregatedRanges:q.aggregatedranges,text:q.text}));}});e.exports=o;});
__d("UFILikeSentence",["ReactDOM","ImageBlock","LeftRight","ProfileBrowserLink","ProfileBrowserTypes","React","UFIClassSets","UFILikeSentenceText","URI","cx","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('ImageBlock'),i=b('LeftRight'),j=b('ProfileBrowserLink'),k=b('ProfileBrowserTypes'),l=b('React'),m=b('UFIClassSets'),n=b('UFILikeSentenceText'),o=b('URI'),p=b('cx'),q=b('tx'),r=l.createComponent({render:function(){var s=this.props.feedback,t=s.likesentences.current,u=this.props.contextArgs.entstream,v=[m.ROW,{UFILikeSentence:true}];if(s.likesentences.isunseen)v.push(m.UNSEEN_ITEM);var w=null,x=null;if(t.text)x=n({feedback:s,likeSentenceData:t});if(x&&!u){w=g.i({classSet:{UFILikeIcon:true}});if(s.viewercanlike&&!s.hasviewerliked)w=g.a({classSet:{UFILikeThumb:true},href:"#",tabIndex:"-1",title:"Like this item",onClick:this.props.onTargetLikeToggle,children:w});}var y=null;if(s.seencount>0){var z=k.GROUP_MESSAGE_VIEWERS,aa={id:s.targetfbid},ba=j.constructDialogURI(z,aa),ca=j.constructPageURI(z,aa),da=new o('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:s.entidentifier,displayed_count:s.seencount}),ea=s.seenbyall?"Seen by everyone":q._("Seen by {count}",{count:s.seencount});y=g.a({rel:"dialog",ajaxify:ba.toString(),href:ca.toString(),tabindex:"-1",'data-hover':"tooltip",'data-tooltip-alignh':"left",'data-tooltip-uri':da.toString(),classSet:{UFISeenCount:true,UFISeenCountRight:!!t.text},children:[g.span({classSet:{UFISeenCountIcon:true}}),ea]});}var fa=null;if(w&&x){fa=h({imageClassSet:{UFIImageBlockImage:true},contentClassSet:{UFIImageBlockContent:true},children:[w,x,y]});}else if(x&&u){fa=i({children:[x,y]});}else fa=y;return (g.li({classSet:v,children:fa}));}});e.exports=r;});
__d("UFIPager",["ReactDOM","ImageBlock","React","UFIClassSets"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('ImageBlock'),i=b('React'),j=b('UFIClassSets'),k=i.createComponent({onPagerClick:function(l){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();l.nativeEvent.prevent();},render:function(){var l=this.onPagerClick.bind(this),m={ufiPagerLoading:this.props.isLoading},n=[j.ROW,{UFICommentReply:this.props.isReply,UFIPagerRow:true}];if(this.props.isUnseen)n.push(j.UNSEEN_ITEM);return (g.li({classSet:n,'data-ft':this.props['data-ft'],children:h({imageClassSet:{UFIImageBlockImage:true},contentClassSet:{UFIImageBlockContent:true},children:[g.a({classSet:{UFIPagerIcon:true},onClick:l,href:"#",role:"button"}),g.a({classSet:{UFIPagerLink:true},onClick:l,href:"#",role:"button",children:g.span({classSet:m,children:this.props.pagerLabel})}),g.span({className:"fcg",children:this.props.countSentence})]})}));}});e.exports=k;});
__d("UFIReplyRow",["ReactDOM","React","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('React'),i=b('tx'),j={UFIRow:true,UFIComment:true,UFICommentReply:true,UFIReplyRow:true},k={UFIReplyLink:true},l=h.createComponent({render:function(){return (g.li({classSet:j,children:g.span({classSet:k,children:g.a({href:"#",onClick:this.props.onClick,children:"Write a reply..."})})}));}});e.exports=l;});
__d("UFIShareRow",["ReactDOM","ImageBlock","NumberFormat","React","UFIClassSets","URI","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('ImageBlock'),i=b('NumberFormat'),j=b('React'),k=b('UFIClassSets'),l=b('URI'),m=b('tx'),n=j.createComponent({render:function(){var o=new l('/ajax/shares/view').setQueryData({target_fbid:this.props.targetID}),p=new l('/shares/view').setSubdomain('www').setQueryData({id:this.props.targetID}),q;if(this.props.shareCount>1){var r=i.formatIntegerWithDelimiter(this.props.shareCount,this.props.contextArgs.numberdelimiter||',');q=m._("{count} shares",{count:r});}else q="1 share";return (g.li({classSet:k.ROW,children:h({imageClassSet:{UFIImageBlockImage:true},contentClassSet:{UFIImageBlockContent:true},children:[g.a({className:"UFIShareIcon",rel:"dialog",ajaxify:o.toString(),href:p.toString()}),g.a({className:"UFIShareLink",rel:"dialog",ajaxify:o.toString(),href:p.toString(),children:q})]})}));}});e.exports=n;});
__d("UFISpamPlaceholder",["ReactDOM","React","UFIClassSets","tx"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('React'),i=b('UFIClassSets'),j=b('tx'),k=h.createComponent({render:function(){var l={UFISpamCommentWrapper:true,UFISpamCommentLoading:this.props.isLoading};return (g.li({classSet:i.ROW,children:g.a({href:"#",role:"button",classSet:{UFISpamCommentLink:true},onClick:this.props.onClick,children:g.span({'data-hover':"tooltip",'data-tooltip-alignh':"center",'aria-label':j._("{count} hidden",{count:this.props.numHidden}),classSet:l,children:g.i({classSet:{placeholderIcon:true}})})})}));}});e.exports=k;});
__d("UFI",["ReactDOM","NumberFormat","React","ReactLegacyScrollableArea","UFIAddCommentController","UFIComment","UFIConstants","UFIContainer","UFIInstanceState","UFILikeSentence","UFIPager","UFIReplyRow","UFIShareRow","UFISpamPlaceholder","UFITrackingNodes","isEmpty","tx","copyProperties"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('NumberFormat'),i=b('React'),j=b('ReactLegacyScrollableArea'),k=b('UFIAddCommentController'),l=b('UFIComment'),m=b('UFIConstants'),n=b('UFIContainer'),o=b('UFIInstanceState'),p=b('UFILikeSentence'),q=b('UFIPager'),r=b('UFIReplyRow'),s=b('UFIShareRow'),t=b('UFISpamPlaceholder'),u=b('UFITrackingNodes'),v=b('isEmpty'),w=b('tx'),x=b('copyProperties'),y=i.createComponent({getInitialState:function(){return {requestRanges:x({},this.props.availableRanges),showRepliesMap:x({},this.props.showRepliesMap),replyComposerCommentID:null,loadingSpamIDs:{},isActiveLoading:false};},propTrigger:function(z){if(this.state.isActiveLoading){var aa=this.props.availableRanges[this.props.id],ba=z.availableRanges[this.props.id];if(aa.offset!=ba.offset||aa.length!=ba.length){var ca=(ba.offset<aa.offset)?0:aa.length,da=z.availableComments[ca].ufiinstanceid;o.updateState(da,'autofocus',true);}return {isActiveLoading:false};}},render:function(){var z=this.props,aa=z.feedback,ba=z.contextArgs,ca=z.source!=m.UFIFeedbackSourceType.ADS,da=(!v(aa.likesentences.current)||aa.seencount>0)&&ca,ea=null;if(da)ea=p({contextArgs:ba,feedback:aa,onTargetLikeToggle:z.onTargetLikeToggle});var fa=z.availableComments&&z.availableComments.length&&ca,ga=null;if(fa)ga=this.renderCommentMap(z.availableComments,z.availableRanges[z.id].offset);var ha=null,ia=aa.cancomment;if(ia&&ba.showaddcomment&&aa.actorforpost){var ja=new k(null,z.id,null,ba),ka=z.authorProfiles[aa.actorforpost];ha=ja.renderAddComment(ka,aa.mentionsdatasource,aa.showsendonentertip);}var la=null,ma=ba.showshares&&aa.sharecount&&ca;if(ma&&!ba.entstream)la=s({targetID:aa.targetfbid,shareCount:aa.sharecount,contextArgs:ba});var na=this.renderPagers(),oa=da||ma||fa||ia,pa=[na.topPager,ga,na.bottomPager];if(ba.scrollcomments&&ba.scrollwidth)pa=g.li({children:j({width:ba.scrollwidth,children:[g.ul({children:pa})]})});return (n({hasNub:ba.shownub&&oa,children:[ea,la,pa,ha]}));},renderCommentMap:function(z,aa){var ba={},ca=z.length>0&&z[0].parentcommentid,da=[],ea=function(){if(da.length>0){var sa=function(ta,ua){this.state.loadingSpamIDs[ta[0]]=true;this.updateState({});this.props.onSpamFetch(ta,ua);}.bind(this,da,ca);ba['spam'+da[0]]=t({onClick:sa,numHidden:da.length,isLoading:!!this.state.loadingSpamIDs[da[0]]});da=[];}}.bind(this),fa=this.props.instanceid,ga=o.getKeyForInstance(fa,'editcommentid'),ha=this.state.replyComposerCommentID,ia=z.length&&!!z[0].parentcommentid,ja=z.length;for(var ka=0;ka<ja;ka++)if(z[ka].status==m.UFIStatus.SPAM){da.push(z[ka].id);}else{ea();var la=Math.max(this.props.loggingOffset-ka-aa,0),ma=z[ka],na=null;if(ha===ma.id){na=this.renderReplyComposer(ma);}else if(this.props.feedback.cancomment)na=r({onClick:this.onCommentReply.bind(this,ma)});var oa=null;if(this.props.repliesMap&&this.props.repliesMap[z[ka].id]&&this.state.showRepliesMap[z[ka].id]){var pa=this.renderPagers(z[ka].id),qa=this.renderCommentMap(this.props.repliesMap[z[ka].id],this.props.availableRanges[z[ka].id].offset);oa=g.ul({classSet:{UFIReplyList:true},children:[pa.topPager,qa,pa.bottomPager,na]});}var ra;if(ma.id==ga){ra=this.renderEditCommentBox(ma);}else{ra=this.renderComment(ma,la,ka===ja-1);if(!ia)ra.props.showReplyLink=true;}ba['comment'+z[ka].id]=ra;ba['replies'+z[ka].id]=oa;}ea();return ba;},renderReplyComposer:function(z){var aa=this.props;return (new k(null,aa.id,z.id,aa.contextArgs)).renderAddComment(aa.authorProfiles[aa.feedback.actorforpost],aa.feedback.mentionsdatasource,false,'replycomposer',true);},renderEditCommentBox:function(z){var aa=new k(null,this.props.id,null,{}),ba=aa.renderEditComment(this.props.authorProfiles[this.props.feedback.actorforpost],z.id,this.props.feedback.mentionsdatasource,this.props.onEditAttempt.bind(null,z),this.props.onCancelEdit);return ba;},renderComment:function(z,aa,ba){var ca=this.props,da=ca.feedback,ea=da.actorforpost===z.author,fa=o.getKeyForInstance(this.props.instanceid,'locallycomposed'),ga=z.islocal||fa&&fa[z.id],ha=da.showremovemenu||(da.viewerid===z.author),ia=da.canremoveall&&da.isownerpage&&!ea,ja=ca.source!=m.UFIFeedbackSourceType.INTERN,ka=u.getTrackingInfo(u.types.COMMENT,aa),la=!!z.parentcommentid,ma=this.state.showRepliesMap[z.id]||false;return (l({comment:z,isLast:ba,authorProfiles:this.props.authorProfiles,viewerIsAuthor:ea,feedback:da,'data-ft':ka,contextArgs:this.props.contextArgs,hideAsSpamForPageAdmin:ia,isLocallyComposed:ga,isReply:la,showPermalink:ja,showRemoveReportMenu:ha,showReplies:ma,onBlingBoxClick:this.onToggleBlingBox.bind(this,z),onCommentLikeToggle:ca.onCommentLikeToggle.bind(null,z),onCommentReply:this.onCommentReply.bind(this,z),onCommentTranslate:ca.onCommentTranslate.bind(null,z),onEdit:ca.onCommentEdit.bind(null,z),onHideAsSpam:ca.onCommentHideAsSpam.bind(null,z),onInlineBan:ca.onCommentInlineBan.bind(null,z),onMarkAsNotSpam:ca.onCommentMarkAsNotSpam.bind(null,z),onOneClickRemove:ca.onCommentOneClickRemove.bind(null,z),onPreviewRemove:ca.onPreviewRemove.bind(null,z),onRemove:ca.onCommentRemove.bind(null,z),onRetrySubmit:ca.onRetrySubmit.bind(null,z),onUndoInlineBan:ca.onCommentUndoInlineBan.bind(null,z),onUndoOneClickRemove:ca.onCommentUndoOneClickRemove.bind(null,z)}));},_setShowRepliesMapState:function(z,aa,ba){var ca=this.state.showRepliesMap;ca[z]=aa;this.updateState({showRepliesMap:ca,replyComposerCommentID:ba?z:this.state.replyComposerCommentID});},onToggleBlingBox:function(z){var aa=!this.state.showRepliesMap[z.id];this._setShowRepliesMapState(z.id,aa);var ba=this.props.availableRanges[z.id].length-this.props.deletedCounts[z.id];if(aa&&ba===0){var ca=this.props.commentCounts[z.id],da=Math.min(ca,this.props.pageSize);this.onPage(z.id,{offset:ca-da,length:da});}},onPage:function(z,aa){var ba=this.state.requestRanges;ba[z]=aa;this.updateState({requestRanges:ba,isActiveLoading:true});this.props.onChangeRange(z,aa);},renderPagers:function(z){var aa=this.props;z=z||aa.id;if(!this.state.requestRanges[z])this.state.requestRanges[z]=aa.availableRanges[z];var ba=this.state.requestRanges[z].offset,ca=this.state.requestRanges[z].length,da=aa.availableRanges[z].offset,ea=aa.availableRanges[z].length,fa=aa.deletedCounts[z],ga=aa.commentCounts[z],ha=ga-fa,ia=ea-fa,ja=aa.contextArgs.numberdelimiter||',',ka=z!==aa.id,la={topPager:null,bottomPager:null};if(aa.source==m.UFIFeedbackSourceType.ADS)return la;var ma=ba<da,na=ba+ca>da+ea;if(ea==ga)return la;var oa=(da+ea)==ga;if((ga<aa.pageSize&&oa)||ia===0){var pa=Math.min(ga,aa.pageSize),qa=this.onPage.bind(this,z,{offset:ga-pa,length:pa}),ra;if(ha==1){ra=ka?"View 1 reply":"View 1 comment";}else{var sa=h.formatIntegerWithDelimiter(ha,ja);ra=ka?w._("View all {count} replies",{count:sa}):w._("View all {count} comments",{count:sa});}var ta=u.getTrackingInfo(u.types.VIEW_ALL_COMMENTS),ua=q({isUnseen:aa.feedback.hasunseencollapsed,isLoading:ma,isReply:ka,pagerLabel:ra,onPagerClick:qa,'data-ft':ta});if(aa.feedback.isranked&&!ka){la.bottomPager=ua;}else la.topPager=ua;return la;}if(da>0){var va=Math.max(da-aa.pageSize,0),pa=da+ea-va,wa=this.onPage.bind(this,z,{offset:va,length:pa}),xa=h.formatIntegerWithDelimiter(ia,ja),ya=h.formatIntegerWithDelimiter(ha,ja),za=w._("{countshown} of {totalcount}",{countshown:xa,totalcount:ya});if(aa.feedback.isranked&&!ka){la.bottomPager=q({isLoading:ma,isReply:ka,pagerLabel:"View more comments",onPagerClick:wa,countSentence:za});}else{var ab=ka?"View previous replies":"View previous comments";la.topPager=q({isLoading:ma,isReply:ka,pagerLabel:ab,onPagerClick:wa,countSentence:za});}}if(da+ea<ga){var bb=Math.min(ea+aa.pageSize,ga-da),cb=this.onPage.bind(this,z,{offset:da,length:bb});if(aa.feedback.isranked&&!ka){la.topPager=q({isLoading:na,isReply:ka,pagerLabel:"View previous comments",onPagerClick:cb});}else{var db=ka?"View more replies":"View more comments";la.bottomPager=q({isLoading:na,isReply:ka,pagerLabel:db,onPagerClick:cb});}}return la;},onCommentReply:function(z){var aa=z.parentcommentid||z.id,ba=this.state.replyComposerCommentID;if(aa!==ba){this._setShowRepliesMapState(aa,true,true);}else if(!this.state.showRepliesMap[aa]){this._setShowRepliesMapState(aa,true);}else if(this.refs&&this.refs.replycomposer)this.refs.replycomposer.focus();}});e.exports=y;});
__d("UFIController",["ReactDOM","Arbiter","Bootloader","CSS","DOM","DOMQuery","ImmutableObject","LayerRemoveOnHide","LiveTimer","Parent","React","ReactMount","ShortProfiles","UFI","UFIActionLinkController","UFICentralUpdates","UFIComments","UFIConstants","UFIFeedbackTargets","UFIInstanceState","UFIUserActions","copyProperties","isEmpty","tx","UFICommentTemplates"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('DOMQuery'),l=b('ImmutableObject'),m=b('LayerRemoveOnHide'),n=b('LiveTimer'),o=b('Parent'),p=b('React'),q=b('ReactMount'),r=b('ShortProfiles'),s=b('UFI'),t=b('UFIActionLinkController'),u=b('UFICentralUpdates'),v=b('UFIComments'),w=b('UFIConstants'),x=b('UFIFeedbackTargets'),y=b('UFIInstanceState'),z=b('UFIUserActions'),aa=b('copyProperties'),ba=b('isEmpty'),ca=b('tx'),da=c('UFICommentTemplates'),ea=function(ha,ia,ja,ka){var la=ha.offset+ha.length===ia;return {offset:ha.offset,length:(la&&fa(ka))?ja-ha.offset:ha.length};},fa=function(ha){return ha==w.UFIPayloadSourceType.USER_ACTION||ha==w.UFIPayloadSourceType.LIVE_SEND;};function ga(ha,ia,ja){this.root=ha;this.id=ia.ftentidentifier;this.source=ia.source;this._ufiInstanceID=ia.instanceid;this._contextArgs=ia;this._verifiedCommentsExpanded=false;var ka=ja.feedbacktargets[0];this.actionLink=new t(ha,ia,ka);var la=ja.commentlists[this.id];this.commentcounts={};this.deletedcounts={};this.ranges={};this.repliesMap={};this.showRepliesMap={};this.commentcounts[this.id]=v.getCommentCount(this.id);this.deletedcounts[this.id]=0;this.ranges[this.id]=aa({},la.range);for(var ma=0;ma<la.values.length;ma++){var na=la.values[ma],oa=ja.commentlists[na];if(oa){this.commentcounts[na]=v.getCommentCount(na);this.deletedcounts[na]=0;this.ranges[na]=aa({},oa.range);}}this.ranges=new l(this.ranges);this._loggingOffset=null;this._ufi=null;this.ufiCentralUpdatesSubscriptions=[u.subscribe('feedback-updated',function(pa,qa){var ra=qa.updates;if(this.id in ra)this.fetchAndUpdate(this.render.bind(this),qa.payloadSource);}.bind(this)),u.subscribe('feedback-id-changed',function(pa,qa){var ra=qa.updates;if(this.id in ra)this.id=ra[this.id];}.bind(this)),u.subscribe('instance-updated',function(pa,qa){var ra=qa.updates;if(this._ufiInstanceID in ra){var sa=ra[this._ufiInstanceID];if(sa.editcommentid)this.render(qa.payloadSource);}}.bind(this)),u.subscribe('update-comment-lists',function(pa,qa){var ra=qa.commentlists;if(ra&&Object.keys(ra).length)for(var sa in ra)if(!this.ranges[sa])this.ranges=l.set(this.ranges,{ftEntIdentifier:ra[sa].range});}.bind(this))];this.clearPageletSubscription=g.subscribe('ajaxpipe/clear_pagelet',this.onPageletDestroy.bind(this));u.handleUpdate(w.UFIPayloadSourceType.INITIAL_SERVER,ja);h.loadModules(['ScrollAwareDOM'],function(pa){q.scrollMonitor=pa.monitor;});}aa(ga.prototype,{_getParentForm:function(){if(!this._form)this._form=o.byTag(this.root,'form');return this._form;},_onTargetLikeToggle:function(event){var ha=!this.feedback.hasviewerliked;z.changeLike(this.id,ha,{source:this.source,target:event.target});event.preventDefault();},_onCommentLikeToggle:function(ha,event){var ia=!ha.hasviewerliked;z.changeCommentLike(ha.id,ia,{source:this.source,target:event.target});},_onCommentEdit:function(ha){y.updateState(this._ufiInstanceID,'isediting',true);y.updateState(this._ufiInstanceID,'editcommentid',ha.id);},_onEditAttempt:function(ha,ia,event){if(!ia.visibleValue){this._onCommentRemove(ha);}else z.editComment(ha.id,ia.visibleValue,ia.encodedValue,{source:this._contextArgs.source,target:event.target});y.updateStateField(this._ufiInstanceID,'locallycomposed',ha.id,true);this._onEditReset();},_onEditReset:function(){y.updateState(this._ufiInstanceID,'isediting',false);y.updateState(this._ufiInstanceID,'editcommentid',null);},_onCommentRemove:function(ha,event){var ia=da[':fb:ufi:hide-dialog-template'].build();j.setContent(ia.getNode('body'),"Are you sure you want to delete this comment?");j.setContent(ia.getNode('title'),"Delete Comment");h.loadModules(['DialogX'],function(ja){var ka=new ja({modal:true,width:465,addedBehaviors:[m]},ia.getRoot());ka.subscribe('confirm',function(){z.removeComment(ha.id,{source:this.source,oneclick:false,target:event.target,timelinelogdata:this._contextArgs.timelinelogdata});ka.hide();}.bind(this));ka.show();}.bind(this));},_onCommentOneClickRemove:function(ha,event){z.removeComment(ha.id,{source:this.source,oneclick:true,target:event.target,timelinelogdata:this._contextArgs.timelinelogdata});},_onCommentUndoOneClickRemove:function(ha,event){var ia=this.feedback.canremoveall&&this.feedback.isownerpage&&this.feedback.actorforpost!==this.authorProfiles[ha.author];z.undoRemoveComment(ha.id,ia,{source:this.source,target:event.target});},_onCommentHideAsSpam:function(ha,event){z.setHideAsSpam(ha.id,true,{source:this.source,target:event.target});},_onCommentMarkAsNotSpam:function(ha,event){z.setHideAsSpam(ha.id,false,{source:this.source,target:event.target});},_onCommentTranslate:function(ha,event){z.translateComment(ha,{source:this.source,target:event.target});},_onCommentInlineBanChange:function(ha,ia,event){z.banUser(ha,this.feedback.ownerid,ia,{source:this.source,target:event.target});},_onCommentInlineBan:function(ha,event){this._onCommentInlineBanChange(ha,true,event);},_onCommentUndoInlineBan:function(ha,event){this._onCommentInlineBanChange(ha,false,event);},_fetchSpamComments:function(ha,ia){z.fetchSpamComments(this.id,ha,ia);},_removePreview:function(ha,event){z.removePreview(ha,{source:this.source,target:event.target});},_retrySubmit:function(ha){h.loadModules(['UFIRetryActions'],function(ia){ia.retrySubmit(ha,{source:this.source});}.bind(this));},_ensureCommentsExpanded:function(){if(this._verifiedCommentsExpanded)return;var ha=o.byTag(this.root,'form');if(ha){i.removeClass(ha,'collapsed_comments');this._verifiedCommentsExpanded=true;}},render:function(ha){var ia=this.comments.length||!ba(this.feedback.likesentences.current);if(ia&&fa(ha))this._ensureCommentsExpanded();if(this._loggingOffset===null)this._loggingOffset=this.ranges[this.id].offset+this.comments.length-1;var ja=s({feedback:this.feedback,id:this.id,onTargetLikeToggle:this._onTargetLikeToggle.bind(this),onCommentLikeToggle:this._onCommentLikeToggle.bind(this),onCommentRemove:this._onCommentRemove.bind(this),onCommentHideAsSpam:this._onCommentHideAsSpam.bind(this),onCommentMarkAsNotSpam:this._onCommentMarkAsNotSpam.bind(this),onCommentEdit:this._onCommentEdit.bind(this),onCommentOneClickRemove:this._onCommentOneClickRemove.bind(this),onCommentUndoOneClickRemove:this._onCommentUndoOneClickRemove.bind(this),onCommentTranslate:this._onCommentTranslate.bind(this),onCommentInlineBan:this._onCommentInlineBan.bind(this),onCommentUndoInlineBan:this._onCommentUndoInlineBan.bind(this),onEditAttempt:this._onEditAttempt.bind(this),onCancelEdit:this._onEditReset.bind(this),onChangeRange:this._changeRange.bind(this),onSpamFetch:this._fetchSpamComments.bind(this),onPreviewRemove:this._removePreview.bind(this),onRetrySubmit:this._retrySubmit.bind(this),contextArgs:this._contextArgs,repliesMap:this.repliesMap,showRepliesMap:this.showRepliesMap,commentCounts:this.commentcounts,deletedCounts:this.deletedcounts,availableComments:this.comments,source:this.source,availableRanges:this.ranges,pageSize:w.defaultPageSize,authorProfiles:this.authorProfiles,instanceid:this._ufiInstanceID,loggingOffset:this._loggingOffset});this._ufi=p.renderOrUpdateComponent(ja,this.root);n.updateTimeStamps();if(this._getParentForm())g.inform('ufi/changed',{form:this._getParentForm()});},fetchAndUpdate:function(ha,ia){x.getFeedbackTarget(this.id,function(ja){var ka=v.getCommentCount(this.id),la=ea(this.ranges[this.id],this.commentcounts[this.id],ka,ia);v.getCommentsInRange(this.id,la,function(ma){var na=[],oa={},pa={};if(ja.actorforpost)na.push(ja.actorforpost);for(var qa=0;qa<ma.length;qa++){if(ma[qa].author)na.push(ma[qa].author);if(ma[qa].socialcontext)na.push(ma[qa].socialcontext.topmutualid);if(ja.isthreaded){var ra=ma[qa].id,sa=v.getCommentCount(ra),ta;if(this.ranges[ra]){ta=ea(this.ranges[ra],this.commentcounts[ra],sa,ia);}else ta={offset:0,length:Math.min(sa,2)};oa[ra]=ta;pa[ra]=sa;}}v.getRepliesInRanges(this.id,oa,function(ua){for(var va=0;va<ma.length;va++){var wa=ma[va].id,xa=ua[wa]||[];for(var ya=0;ya<xa.length;ya++){if(xa[ya].author)na.push(xa[ya].author);if(xa[ya].socialcontext)na.push(xa[ya].socialcontext.topmutualid);}}r.getMulti(na,function(za){this.authorProfiles=za;this.feedback=ja;this.commentcounts[this.id]=ka;this.deletedcounts[this.id]=v.getDeletedCount(this.id);this.comments=ma;var ab={};ab[this.id]=la;for(var bb=0;bb<ma.length;bb++){var cb=ma[bb].id,db=oa[cb];this.repliesMap[cb]=ua[cb];ab[cb]=db;this.commentcounts[cb]=pa[cb];this.deletedcounts[cb]=v.getDeletedCount(cb);this.showRepliesMap[cb]=db&&db.length>0;}this.ranges=l.set(this.ranges,ab);ha(ia);if(ia==w.UFIPayloadSourceType.ENDPOINT_COMMENT_FETCH)g.inform('CommentUFI.Pager');}.bind(this));}.bind(this));}.bind(this));}.bind(this));},_changeRange:function(ha,ia){var ja={};ja[ha]=ia;this.ranges=l.set(this.ranges,ja);this.fetchAndUpdate(this.render.bind(this),w.UFIPayloadSourceType.USER_ACTION);},onPageletDestroy:function(ha,ia){if(k.contains(ia.pagelet_id,this.root)){p.destroyAndReleaseReactRootNode(this.root);this.ufiCentralUpdatesSubscriptions.forEach(u.unsubscribe.bind(u));g.unsubscribe(this.clearPageletSubscription);}}});e.exports=ga;});
__d("AsyncDOM",["CSS","DOM"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i={invoke:function(j,k){for(var l=0;l<j.length;++l){var m=j[l],n=m[0],o=m[1],p=m[2],q=m[3],r=(p&&k)||null;if(o)r=h.scry(r||document.documentElement,o)[0];switch(n){case 'eval':(new Function(q)).apply(r);break;case 'hide':g.hide(r);break;case 'show':g.show(r);break;case 'setContent':h.setContent(r,q);break;case 'appendContent':h.appendContent(r,q);break;case 'prependContent':h.prependContent(r,q);break;case 'insertAfter':h.insertAfter(r,q);break;case 'insertBefore':h.insertBefore(r,q);break;case 'remove':h.remove(r);break;case 'replace':h.replace(r,q);break;default:}}}};e.exports=i;});
__d("Live",["Arbiter","AsyncDOM","AsyncSignal","ChannelConstants","DataStore","DOM","ServerJS","createArrayFrom","emptyFunction"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncDOM'),i=b('AsyncSignal'),j=b('ChannelConstants'),k=b('DataStore'),l=b('DOM'),m=b('ServerJS'),n=b('createArrayFrom'),o=b('emptyFunction');function p(r,s){s=JSON.parse(JSON.stringify(s));new m().setRelativeTo(r).handle(s);}var q={logAll:false,startup:function(){q.startup=o;g.subscribe(j.getArbiterType('live'),q.handleMessage.bind(q));},lookupLiveNode:function(r,s){var t=l.scry(document.body,'.live_'+r+'_'+s);t.forEach(function(u){if(k.get(u,'seqnum')===undefined){var v=JSON.parse(u.getAttribute('data-live'));k.set(u,'seqnum',v.seq);}});return t;},handleMessage:function(r,s){var t=s.obj,u=t.fbid,v=t.assoc,w=this.lookupLiveNode(u,v);if(!w)return false;w.forEach(function(x){if(t.expseq){var y=k.get(x,'seqnum'),z=k.get(x,'message_buffer');if(z===undefined){z={};k.set(x,'message_buffer',z);}var aa={obj:t};z[t.expseq]=aa;if(t.expseq!=y){q.log('mismatch',t.fbid,t.expseq,y);return false;}while(true){y=k.get(x,'seqnum');var ba=z[y];if(ba){h.invoke(ba.obj.updates,x);if(ba.obj.js)p(x,ba.obj.js);q.log('seqmatch',t.fbid,'exp',t.expseq,'cur',y);delete z[y];}else break;}}else{h.invoke(t.updates,x);if(t.js)p(x,t.js);}});},log:function(){if(q.logAll){var r=n(arguments).join(':');new i('/common/scribe_endpoint.php',{c:'live_sequence',m:r}).send();}}};e.exports=q;});
__d("legacy:live-js",["Live"],function(a,b,c,d){a.Live=b('Live');},3);
function ufi_add_ft_hidden_node(a){if(a.link_data)return;var b=collect_data_attribs(a,['ft']).ft;if(Object.keys(b).length){var c=DOM.create('input',{type:'hidden',name:'link_data',value:JSON.stringify(b)});a.appendChild(c);}}function ufi_add_all_link_data(){Bootloader.loadComponents('dom-collect',function(){DOM.scry(document.body,'form.commentable_item').forEach(ufi_add_ft_hidden_node);});}function question_add_all_link_data(){Bootloader.loadComponents('dom-collect',function(){DOM.scry(document.body,'form.fbEigenpollForm').forEach(ufi_add_ft_hidden_node);DOM.scry(document.body,'form.fbQuestionPollForm').forEach(ufi_add_ft_hidden_node);});}
__d("highlight",["Animation","Style"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Style');function i(j,k,l){new g(j).from('background','#fff9d7').to('background',l||'#fff').ease(g.ease.both).duration(2000).ondone(function(){h.set(j,'background','');k&&k();}).go();}e.exports=i;});
__d("ScrollHighlight",["DOMScroll","highlight"],function(a,b,c,d,e,f){var g=b('DOMScroll'),h=b('highlight'),i={actOn:function(j,k){g.scrollTo(j);h(j,null,k);}};e.exports=i;});